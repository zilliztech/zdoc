{
  "creator": "ou_e55a208a81fc721928685fc3df9cb678",
  "has_child": false,
  "node_create_time": "1697536178",
  "node_token": "FosYwomcEims6PkFvwgcwZbcn1e",
  "node_type": "origin",
  "obj_create_time": "1697536178",
  "obj_edit_time": "1700112584",
  "obj_token": "LxxEd296boH0YnxmJeGcvgPAnmf",
  "obj_type": "docx",
  "origin_node_token": "FosYwomcEims6PkFvwgcwZbcn1e",
  "origin_space_id": "7167193056431783939",
  "owner": "ou_e55a208a81fc721928685fc3df9cb678",
  "parent_node_token": "OaqCwA1YZiQwAwkkaXccyFlgnud",
  "space_id": "7167193056431783939",
  "title": "Upsert Entities",
  "slug": "upsert-entities",
  "blocks": {
    "items": [
      {
        "block_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "block_type": 1,
        "children": [
          "ZrvRdht9Dofbu0xCRfvcQoMbn7b",
          "GtcZd8ApWo3es8xAaQ5ciZetnKg",
          "O3pNdGqW8oAcg6xYysqcGbQsn1e",
          "RFNrdqKlRoSWSLxSqS1cF47znxe",
          "XcuedWGC4oGSWexDLgCcAsBAnSg",
          "A6fPdaZNGoI1qZxsjQaclvmtncb",
          "RzINdQkI9o6G0IxN8VecYgEZn8d",
          "UlfEdYvQRo7O4rxx4yHcKe6dn3s",
          "FqhRdurploOKJ4xip62cDNJZnbb",
          "IkfkdPsOiobmmGx2NM6c7ilfn1f",
          "CBUPdmT7LoG1CSxZAJ9cV1kwnjf",
          "DlHFdMj6cooHBixXXXtcKoRbnmf",
          "A5LZdbrcKoo65Lx9Y5EcoO4anYc",
          "ChWcdoPetoVIdIxbpHcc4y5knJh",
          "TZdWdUymIohcTFx2j6tc6eBbnMe",
          "Ma6qdZaKCoXKrDxW8AQcGq7FnRd",
          "LXFwdBxgeoloV0xUxGtcysc9nlc",
          "JIfWdo9H3o27ZmxfJBkcvbLvnvg",
          "TpWJdTmxdo85fdxthmhcADCYnIe",
          "K6wKdDhYLoGaJDxghxQc6xcBnzh",
          "VXDFdJkyaobWBKx9g7ucTcmknGd",
          "SGNqdkfoSo7pFUxdIeWcA3CJnvc",
          "KWdldHrMnofbBLx0KvXcSduOn6b",
          "AdzadPECuoqn4Gxr4SNcEB6indg",
          "Ao56dQjSloJAB4x3CqscUviSnhh",
          "O0rqdqw5Ko0c9UxezL6cYkm2nBh",
          "DZQWdCjf8oLRs8xexPRcAfk9nbc",
          "HeqNdBidioB6QbxFvcPcga6Jnuh",
          "X0OodCQNzov4Anx6FKrcROH2nth",
          "QjfkdKXVqohnk5xQJE1c2YlxngF",
          "DnSadjREpo33XxxDTiXcxaKbnuh",
          "YqPtdQ4flo5BtfxPsHucLAWWnOe",
          "ZtMhdknZIoVY76xz6zzcyDmmnod",
          "F5nIdQxT6otVCLx8FR8cwlmRnYf"
        ],
        "page": {
          "elements": [
            {
              "text_run": {
                "content": "Upsert ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "Entities",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1
          }
        },
        "parent_id": ""
      },
      {
        "block_id": "ZrvRdht9Dofbu0xCRfvcQoMbn7b",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "This topic describes how to upsert data into a collection in Zilliz Cloud.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "GtcZd8ApWo3es8xAaQ5ciZetnKg",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Upserting data is a combination of update and insert operations. In Zilliz Cloud, an upsert operation performs a data-level action to either insert or update an entity based on whether its primary key already exists in a collection. Specifically:",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "O3pNdGqW8oAcg6xYysqcGbQsn1e",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "If the primary key of the entity already exists in the collection, the existing entity will be overwritten.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "RFNrdqKlRoSWSLxSqS1cF47znxe",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "If the primary key does not exist in the collection, a new entity will be inserted.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "XcuedWGC4oGSWexDLgCcAsBAnSg",
        "block_type": 34,
        "children": [
          "RUCSdmM12opYNtxNwjJcA9kun8g",
          "G0nad0zamo4dBUxmrtwc4wanntb"
        ],
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "quote_container": {}
      },
      {
        "block_id": "RUCSdmM12opYNtxNwjJcA9kun8g",
        "block_type": 2,
        "parent_id": "XcuedWGC4oGSWexDLgCcAsBAnSg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "ðŸ“˜ Notes",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "G0nad0zamo4dBUxmrtwc4wanntb",
        "block_type": 2,
        "parent_id": "XcuedWGC4oGSWexDLgCcAsBAnSg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "The support for data upsert is available as a Beta feature. The feature and the documentation may change anytime during the Beta stage.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "A6fPdaZNGoI1qZxsjQaclvmtncb",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Before you start",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "RzINdQkI9o6G0IxN8VecYgEZn8d",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Before upserting data, make sure the following conditions are met:",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "UlfEdYvQRo7O4rxx4yHcKe6dn3s",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "You have upgraded your cluster to the Beta version.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "FqhRdurploOKJ4xip62cDNJZnbb",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "You have downloaded the example dataset. For details, see ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Example Dataset",
                "token": "FCgWwFVtQiUy9GkDlQNcA0xZnPa",
                "url": "https://zilliverse.feishu.cn/wiki/FCgWwFVtQiUy9GkDlQNcA0xZnPa"
              }
            },
            {
              "text_run": {
                "content": ".",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "IkfkdPsOiobmmGx2NM6c7ilfn1f",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "You have created a collection with a schema matching the example dataset and already have the collection indexed and loaded. For details, see ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Create Collection",
                "token": "QnKCw0v4TiFkITkneCmcy0mZnre",
                "url": "https://zilliverse.feishu.cn/wiki/QnKCw0v4TiFkITkneCmcy0mZnre"
              }
            },
            {
              "text_run": {
                "content": ".",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "CBUPdmT7LoG1CSxZAJ9cV1kwnjf",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Prepare data",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "DlHFdMj6cooHBixXXXtcKoRbnmf",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "In this example, we upsert the entities in the example dataset. You can use the following code to process data:",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "A5LZdbrcKoo65Lx9Y5EcoO4anYc",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# (Continued)\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "import json",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "DATASET_PATH=\"../medium_articles_2020_dpr.json\" # Set your dataset path",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\nwith open('medium_articles_2020_dpr.json') as f:\n    data = json.load(f)\n    data_to_upsert = data[\"rows\"][:100]\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "print(rows[0])",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "# Prepare a list of rows\nwith open(DATASET_PATH) as f:\n    data = json.load(f)\n    rows = data['rows']\n\nprint(rows[:3])\n\n# Output\n#\n# [\n#     {\n#         \"id\": 0,\n#         \"title\": \"The Reported Mortality Rate of Coronavirus Is Not Important\",\n#         \"title_vector\": [\n#             0.041732933,\n#             0.013779674,\n#             -0.027564144,\n#             -0.013061441,\n#             0.009748648,\n#             0.00082446384,\n#             -0.00071647146,\n#             0.048612226,\n#             -0.04836573,\n#             -0.04567751,\n#             \"(758 more items hidden)\"\n#         ],\n#         \"link\": \"https://medium.com/swlh/the-reported-mortality-rate-of-coronavirus-is-not-important-369989c8d912\",\n#         \"reading_time\": 13,\n#         \"publication\": \"The Startup\",\n#         \"claps\": 1100,\n#         \"responses\": 18\n#     }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "# ]",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "ChWcdoPetoVIdIxbpHcc4y5knJh",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "const fs = require('fs');\nconst data_file = `./medium_articles_2020_dpr.json`\n\nasync function main () {\n\n    // (Continued)\n    \n    const data = JSON.parse(fs.readFileSync(data_file, \"utf8\"))\n\n    // read rows\n    const rows = data[\"rows\"]\n    const row = rows[0]\n\n    console.log(Object.keys(row))\n\n    // Output\n    // \n    // [\n    //   'id',\n    //   'title',\n    //   'title_vector',\n    //   'link',\n    //   'reading_time',\n    //   'publication',\n    //   'claps',\n    //   'responses'\n    // ]\n    //     \n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "}",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "TZdWdUymIohcTFx2j6tc6eBbnMe",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "public final class UseCustomizedSchemaDemo  {\n    public static void main(String[] args) {\n        \n        // (Continued)\n        \n        String data_file = \"../medium_articles_2020_dpr.json\";\n        \n        String content;\n\n        // read a local file\n        Path file = Path.of(data_file);\n        try {\n            content = Files.readString(file);\n        } catch (Exception e) {\n            System.err.println(\"Failed to read file: \" + e.getMessage());\n            return;\n        }\n\n        System.out.println(\"Successfully read file\");\n\n        // Output:\n        // Successfully read file\n        \n        // Load dataset\n        JSONObject dataset = JSON.parseObject(content);\n        List<JSONObject> rows = getRows(dataset.getJSONArray(\"rows\"), 5979);\n        \n        // Also, you can get fields from dataset and insert them\n        // List<Field> fields = getFields(dataset.getJSONArray(\"rows\"), 5979);\n    }\n    \n    public static List<JSONObject> getRows(JSONArray dataset, int counts) {\n        List<JSONObject> rows = new ArrayList<JSONObject>();\n        for (int i = 0; i < counts; i++) {\n            JSONObject row = dataset.getJSONObject(i);\n            List<Float> vectors = row.getJSONArray(\"title_vector\").toJavaList(Float.class);\n            Long reading_time = row.getLong(\"reading_time\");\n            Long claps = row.getLong(\"claps\");\n            Long responses = row.getLong(\"responses\");\n            row.put(\"title_vector\", vectors);\n            row.put(\"reading_time\", reading_time);\n            row.put(\"claps\", claps);\n            row.put(\"responses\", responses);\n            row.remove(\"id\");\n            rows.add(row);\n        }\n        return rows;\n    }\n\n    public static List<Field> getFields(JSONArray dataset, int counts) {\n        List<Field> fields = new ArrayList<Field>();\n        List<String> titles = new ArrayList<String>();\n        List<List<Float>> title_vectors = new ArrayList<List<Float>>();\n        List<String> links = new ArrayList<String>();\n        List<Long> reading_times = new ArrayList<Long>();\n        List<String> publications = new ArrayList<String>();\n        List<Long> claps_list = new ArrayList<Long>();\n        List<Long> responses_list = new ArrayList<Long>();\n\n        for (int i = 0; i < counts; i++) {\n            JSONObject row = dataset.getJSONObject(i);\n            titles.add(row.getString(\"title\"));\n            title_vectors.add(row.getJSONArray(\"title_vector\").toJavaList(Float.class));\n            links.add(row.getString(\"link\"));\n            reading_times.add(row.getLong(\"reading_time\"));\n            publications.add(row.getString(\"publication\"));\n            claps_list.add(row.getLong(\"claps\"));\n            responses_list.add(row.getLong(\"responses\"));\n        }\n\n        fields.add(new Field(\"title\", titles));\n        fields.add(new Field(\"title_vector\", title_vectors));\n        fields.add(new Field(\"link\", links));\n        fields.add(new Field(\"reading_time\", reading_times));\n        fields.add(new Field(\"publication\", publications));\n        fields.add(new Field(\"claps\", claps_list));\n        fields.add(new Field(\"responses\", responses_list));\n\n        return fields;        \n    }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "}",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "Ma6qdZaKCoXKrDxW8AQcGq7FnRd",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# read the first 100 records from the dataset\ndata=\"$(cat path/to/medium_articles_2020_dpr.json \\\n        | jq '.rows' \\\n        | jq '.[1:100]' \\\n        | jq -r '.[] | . + {\"vector\": .title_vector} | del(.title_vector) | del(.id)' \\\n        | jq -s -c '.')\"\n        \n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 7,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "LXFwdBxgeoloV0xUxGtcysc9nlc",
        "block_type": 4,
        "comment_ids": [
          "7295391654318489604"
        ],
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Upsert data",
                "text_element_style": {
                  "bold": false,
                  "comment_ids": [
                    "7295391654318489604"
                  ],
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "JIfWdo9H3o27ZmxfJBkcvbLvnvg",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Once the data is ready, use the following code to upsert it to the collection:",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "TpWJdTmxdo85fdxthmhcADCYnIe",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# upsert entities",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "# MilvusClient does not support upsert yet.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "from pymilvus import",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "Collection\n# upsert data\nresult = collection.upsert(data_to_upsert)\n\n# flush data into memory\ncollection.flush()\n\nprint(f\"Data upserted successfully! Upserted rows: {result.upsert_count}\")\n\n# Output:\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "# Data upserted successfully! Upserted rows: 100",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "K6wKdDhYLoGaJDxghxQc6xcBnzh",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "async function main () {\n\n    // (Continued)\n    \n    //insert vectors\n    res = await client.upsert({\n        collection_name: collectionName,\n        data: rows.slice(1, 1000)\n    })\n\n    console.log(res)\n\n    // Output\n    // \n    // {\n    //   succ_index: [\n    //      0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,\n    //     12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,\n    //     24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n    //     36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\n    //     48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n    //     60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n    //     72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83,\n    //     84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95,\n    //     96, 97, 98, 99,\n    //     ... 899 more items\n    //   ],\n    //   err_index: [],\n    //   status: { error_code: 'Success', reason: '', code: 0 },\n    //   IDs: { int_id: { data: [Array] }, id_field: 'int_id' },\n    //   acknowledged: false,\n    //   insert_cnt: '999',\n    //   delete_cnt: '999',\n    //   upsert_cnt: '999',\n    //   timestamp: '445315186586025986'\n    // }\n    // \n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "}",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "VXDFdJkyaobWBKx9g7ucTcmknGd",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "import io.milvus.param.*;\nimport io.milvus.response.MutationResultWrapper;\nimport io.milvus.grpc.MutationResult;\n\npublic class UseCustomizedSchemaDemo \n{\n    public static void main( String[] args )\n    {\n        // (Continued)\n        \n        UpsertParam upsertParam = UpsertParam.newBuilder()\n            .withCollectionName(collectionName)\n            .withRows(rows)\n            // .withFields(fields)\n            .build();\n\n        R<MutationResult> upsertResponse = client.upsert(upsertParam);\n\n        if (upsertResponse.getStatus() != R.Status.Success.getCode()) {\n            System.err.println(upsertResponse.getMessage());\n        }\n\n        MutationResultWrapper mutationResultWrapper = new MutationResultWrapper(upsertResponse.getData());\n\n        System.out.println(\"Successfully insert entities: \" + mutationResultWrapper.getInsertCount());  \n\n        // Output:\n        // Successfully insert entities: 100\n    }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "}",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "SGNqdkfoSo7pFUxdIeWcA3CJnvc",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# insert record \ncurl --request POST \\\n     --url \"${PUBLIC_ENDPOINT}/v1/vector/upsert\" \\\n     --header \"Authorization: Bearer ${TOKEN}\" \\\n     --header 'accept: application/json' \\\n     --header 'content-type: application/json' \\\n     --data \"{\n        \\\"collectionName\\\": \\\"medium_articles_2020\\\",\n        \\\"data\\\": ${data}\n    }\"\n\n# Response\n#\n# {\n#     \"code\": 200,\n#     \"data\": {\n#         \"upsertCount\": 99,\n#         \"upsertIds\": [\n#             \"442169042773493965\",\n#             \"442169042773493966\"ï¼Œ\n#             ...\n#         ]\n#     }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "# }",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 7,
            "wrap": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "KWdldHrMnofbBLx0KvXcSduOn6b",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Understand",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " flushing data",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "AdzadPECuoqn4Gxr4SNcEB6indg",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "In Zilliz Cloud, data from your insert operations naturally finds its way to storage. ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "Ao56dQjSloJAB4x3CqscUviSnhh",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "In most cases, you don't need to bother with the ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "flush()",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "API",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " every time you insert data. But if you're keen on searching for your newly added data right away, it might be a good idea to call ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "flush()",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ". ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "O0rqdqw5Ko0c9UxezL6cYkm2nBh",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "What ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "flush()",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " does is it wraps up the data segments, ensuring your recent entries are ready for immediate searches. Otherwise, without this step, you might not see your latest additions in immediate search results, because they're not yet properly indexed. ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "DZQWdCjf8oLRs8xexPRcAfk9nbc",
        "block_type": 2,
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "But remember, for most users and most scenarios, there's no rush to call ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "flush()",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ". The system handles it gracefully for you.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "HeqNdBidioB6QbxFvcPcga6Jnuh",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Limits",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "X0OodCQNzov4Anx6FKrcROH2nth",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "Upsert operations do not allow updating the primary key field.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "QjfkdKXVqohnk5xQJE1c2YlxngF",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "Upsert operations cannot be used on collections where ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "autoID",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " is set to ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "True",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " for the primary key field.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "DnSadjREpo33XxxDTiXcxaKbnuh",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Related topics",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "YqPtdQ4flo5BtfxPsHucLAWWnOe",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Create Collection",
                "token": "QnKCw0v4TiFkITkneCmcy0mZnre",
                "url": "https://zilliverse.feishu.cn/wiki/QnKCw0v4TiFkITkneCmcy0mZnre"
              }
            },
            {
              "text_run": {
                "content": " ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "ZtMhdknZIoVY76xz6zzcyDmmnod",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Enable Dynamic Schema",
                "token": "Bb7lwOvwHiJlOgk3RURc3Hi7nrc",
                "url": "https://zilliverse.feishu.cn/wiki/Bb7lwOvwHiJlOgk3RURc3Hi7nrc"
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      },
      {
        "block_id": "F5nIdQxT6otVCLx8FR8cwlmRnYf",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Use Partition Key",
                "token": "UzY9wHHcIiDJAUkkFSzcBUk9n4o",
                "url": "https://zilliverse.feishu.cn/wiki/UzY9wHHcIiDJAUkkFSzcBUk9n4o"
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "LxxEd296boH0YnxmJeGcvgPAnmf"
      }
    ],
    "counts": 37
  }
}