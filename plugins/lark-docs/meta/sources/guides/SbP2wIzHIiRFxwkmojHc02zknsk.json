{
  "creator": "ou_8554528ee6e965bad56710acde1c7847",
  "has_child": false,
  "node_create_time": "1708764316",
  "node_token": "SbP2wIzHIiRFxwkmojHc02zknsk",
  "node_type": "origin",
  "obj_create_time": "1708764316",
  "obj_edit_time": "1708764316",
  "obj_token": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
  "obj_type": "docx",
  "origin_node_token": "SbP2wIzHIiRFxwkmojHc02zknsk",
  "origin_space_id": "7167193056431783939",
  "owner": "ou_8554528ee6e965bad56710acde1c7847",
  "parent_node_token": "KEKtwN7kUiIf7akFPlOcFCkmnQe",
  "space_id": "7167193056431783939",
  "title": "Use Partition Key",
  "slug": "use-partition-key",
  "blocks": {
    "items": [
      {
        "block_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "block_type": 1,
        "children": [
          "doxcnePsZK02Ol6DMUmSghLP9Hf",
          "doxcnBJpD8e0rE0rMlFI4wklJwg",
          "doxcnMMUImcgUFeL22GNvnTLVwg",
          "doxcnPDTCY7nBIOTF4heFf22I64",
          "doxcntXNVUjactEIlZuRDBj7Vvf",
          "doxcncqnSoiiXI35XuKnorWjGUb",
          "doxcnl0clJAdf6UxzDNyeCaBLMd",
          "doxcnZ2Mdig8Vg4NxiGKO5UHqvh",
          "doxcniM6wKozGIYNffNvUhKFTqd",
          "doxcnasG4wSYcdiER8n6xiVBFcf",
          "doxcnN40go1otxenzzbfmG1gI6c",
          "doxcnse92vqXJjiFkHQ3iTXyBPf",
          "doxcnygnbnJWBvUtJbrWzGLHP9d",
          "doxcn1nOFngl2mdZaHmrsyUFpOd",
          "doxcn5dAYahBFP3hBBg5jeqIOIe",
          "doxcnnMojM8kZbRvdzOkFqXnwbc",
          "doxcnMC4mdkaZY4IdGdqX78xvoc",
          "doxcnPcQrT3SahHcebY4JDt2Jbg",
          "doxcnXkEUuWvmoiB5mCzopZ6Rwe",
          "doxcnQWXDgiJKlOpRC2CqaBQwpz",
          "doxcnK8aqJnhETgDU383FThK0Th",
          "doxcnUHHaJC7gW3UPbUMWkh1SDO",
          "doxcnWcNYSZuOD6VsiRkGBqY3ke",
          "doxcnkyJCHtWFVnf3ZKcKkRaFYf",
          "doxcnY1IpfYsz5mgP8dtraY5Oyf",
          "doxcnrxyp7KTOibWRUOCtpdjfr9",
          "doxcnIi5fElMFMGLWXhRfL5JgRh",
          "doxcnOOu6AtAR7TjxYQf9RJl0fc",
          "doxcnGjpLkIjJpVaSBHSfHmFXme",
          "doxcnC7ohOJXYBlLRlRYulVen9d",
          "doxcnDq10XK0WcZ6xzcmRZeOe8g",
          "doxcnI2QuVoqb78dOtQdc4d2Xsf",
          "doxcn1ZaCJ8eOEIXUEoKznohL2b",
          "doxcnnitXxB7Lmplmf1jXVjyNOh",
          "doxcnSdz9e6n8OaQaQf5zTDqs4a",
          "doxcnNlq4VvSGmY7SQ6TkVPOONf",
          "doxcnNTDIIsbHbT8GadCE5yE8yN",
          "doxcnhezVKF7nYAOFg52mLuCUFh",
          "doxcndZB8KlnCaYWY3wo0ADtilh",
          "doxcnJxz9V0ozliZPHU5dTzMOTh",
          "doxcn3L0elQsnKEmaHaXdK83gGT",
          "doxcnpWleoAd3es4xSlxRpKlgHe",
          "doxcnTJKNj1ljrtGEPNSsRUj2zh",
          "doxcnXphgZhN2R8a4AJLGcwERxc",
          "doxcnVJ3FJzedK1LHZsN8FOzEKd",
          "doxcn8GHLvBohg8SyIKOTmKloNd",
          "doxcnZAhsS3RVlcZpena1MZeI7c"
        ],
        "page": {
          "elements": [
            {
              "text_run": {
                "content": "Use Partition Key",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1
          }
        },
        "parent_id": ""
      },
      {
        "block_id": "doxcnePsZK02Ol6DMUmSghLP9Hf",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "This guide walks you through using the partition key to accelerate data retrieval from your collection.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnBJpD8e0rE0rMlFI4wklJwg",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Overview",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnMMUImcgUFeL22GNvnTLVwg",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "The partition key in Zilliz Cloud allows for the distribution of incoming entities into different partitions based on their respective partition key values. This allows entities with the same key value to be grouped together in a partition, which in turn accelerates search performance by avoiding the need to scan irrelevant partitions when filtering by the key field. Compared to traditional filtering methods, the partition key can greatly enhance query performance.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnPDTCY7nBIOTF4heFf22I64",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "You can use the partition key to implement multi-tenancy. For details on multi-tenancy, read ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "Multi-tenancy",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "link": {
                    "url": "https%3A%2F%2Fmilvus.io%2Fdocs%2Fmulti_tenancy.md"
                  },
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " for more.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcntXNVUjactEIlZuRDBj7Vvf",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Before you start",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcncqnSoiiXI35XuKnorWjGUb",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Before creating a collection, ensure that",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnl0clJAdf6UxzDNyeCaBLMd",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "You have a blueprint of your data model (i.e. schema). For details, see ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Schema Explained",
                "token": "TqMFwNyDbiY9qekBfPNcbpuvnib",
                "url": "https://zilliverse.feishu.cn/wiki/TqMFwNyDbiY9qekBfPNcbpuvnib"
              }
            },
            {
              "text_run": {
                "content": ".",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnZ2Mdig8Vg4NxiGKO5UHqvh",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "You have created a dedicated cluster. For details, see ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Create Cluster",
                "token": "KrbjwFhy3iojF3k97XmcvvXMnW7",
                "url": "https://zilliverse.feishu.cn/wiki/KrbjwFhy3iojF3k97XmcvvXMnW7"
              }
            },
            {
              "text_run": {
                "content": ".",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcniM6wKozGIYNffNvUhKFTqd",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "You have downloaded the example dataset. For details, see ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "mention_doc": {
                "obj_type": 16,
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                },
                "title": "Example Dataset",
                "token": "FCgWwFVtQiUy9GkDlQNcA0xZnPa",
                "url": "https://zilliverse.feishu.cn/wiki/FCgWwFVtQiUy9GkDlQNcA0xZnPa"
              }
            },
            {
              "text_run": {
                "content": ".",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnasG4wSYcdiER8n6xiVBFcf",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Enable partition key",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnN40go1otxenzzbfmG1gI6c",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "To demonstrate the use of partition keys, we will continue to use the example dataset that contains over 5,000 articles, and the ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "publication",
                "text_element_style": {
                  "bold": true,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " field will serve as the partition key. ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnse92vqXJjiFkHQ3iTXyBPf",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "import json, time\nfrom pymilvus import connections, FieldSchema, CollectionSchema, DataType, Collection, utility\n\nCLUSTER_ENDPOINT=\"YOUR_CLUSTER_ENDPOINT\" # Set your cluster endpoint\nTOKEN=\"YOUR_CLUSTER_TOKEN\" # Set your token\nCOLLECTION_NAME=\"medium_articles_2020\" # Set your collection name\nDATASET_PATH=\"{}/../medium_articles_2020_dpr.json\".format(os.path.dirname(__file__)) # Set your dataset path\n\n# 1. Connect to cluster\nclient = MilvusClient(\n    uri=CLUSTER_ENDPOINT,\n    token=TOKEN\n)\n\n# 2. Define collection schema\nschema = MilvusClient.create_schema(\n    auto_id=True,\n    partition_key_field=\"publication\"\n)\n\nschema.add_field(field_name=\"id\", datatype=DataType.INT64, is_primary=True)\nschema.add_field(field_name=\"title\", datatype=DataType.VARCHAR, max_length=512)\nschema.add_field(field_name=\"title_vector\", datatype=DataType.FLOAT_VECTOR, dim=768)\nschema.add_field(field_name=\"link\", datatype=DataType.VARCHAR, max_length=512)\nschema.add_field(field_name=\"reading_time\", datatype=DataType.INT64)\nschema.add_field(field_name=\"publication\", datatype=DataType.VARCHAR, max_length=512)\nschema.add_field(field_name=\"claps\", datatype=DataType.INT64)\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "schema.add_field(field_name=\"responses\", datatype=DataType.INT64)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnygnbnJWBvUtJbrWzGLHP9d",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "const fs = require(\"fs\")\nconst { MilvusClient, DataType, sleep } = require(\"@zilliz/milvus2-sdk-node\")\n\nconst address = \"YOUR_CLUSTER_ENDPOINT\"\nconst token = \"YOUR_CLUSTER_TOKEN\"\nconst collectionName = \"medium_articles_2020\"\nconst data_file = `./medium_articles_2020_dpr.json`\n\nasync function main() {\n    // Connect to the cluster\n    const client = new MilvusClient({address, token})\n    \n    // 2. Define fields\n    fields = [\n        {\n            name: \"id\",\n            data_type: DataType.Int64,\n            is_primary_key: true,\n            auto_id: true\n        },\n        {\n            name: \"title\",\n            data_type: DataType.VarChar,\n            max_length: 512\n        },\n        {\n            name: \"title_vector\",\n            data_type: DataType.FloatVector,\n            dim: 768\n        },\n        {\n            name: \"link\",\n            data_type: DataType.VarChar,\n            max_length: 512\n        },\n        {\n            name: \"reading_time\",\n            data_type: DataType.Int64\n        },\n        {\n            name: \"publication\",\n            data_type: DataType.VarChar,\n            max_length: 512,\n            // The field \"publication\" acts as the primary key\n            is_partition_key: true\n        },\n        {\n            name: \"claps\",\n            data_type: DataType.Int64\n        },\n        {\n            name: \"responses\",\n            data_type: DataType.Int64\n        }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "    ]",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcn1nOFngl2mdZaHmrsyUFpOd",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the main function",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\nString clusterEndpoint = \"YOUR_CLUSTER_ENDPOINT\";\nString token = \"YOUR_CLUSTER_TOKEN\";\nString collectionName = \"medium_articles\";\nString data_file = System.getProperty(\"user.dir\") + \"/medium_articles_2020_dpr.json\";\n\n// 1. Connect to Zilliz Cloud cluster\nConnectParam connectParam = ConnectParam.newBuilder()\n    .withUri(clusterEndpoint)\n    .withToken(token)\n    .build();\n\nMilvusServiceClient client = new MilvusServiceClient(connectParam);\n\nSystem.out.println(\"Connected to Zilliz Cloud!\");\n\n// Output:\n// Connected to Zilliz Cloud!\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// 2. Define fields",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "FieldType id = FieldType.newBuilder()\n    .withName(\"id\")\n    .withDataType(DataType.Int64)\n    .withPrimaryKey(true)\n    .withAutoID(true)\n    .build();\n\nFieldType title = FieldType.newBuilder()\n    .withName(\"title\")\n    .withDataType(DataType.VarChar)\n    .withMaxLength(512)\n    .build();\n\nFieldType title_vector = FieldType.newBuilder()\n    .withName(\"title_vector\")\n    .withDataType(DataType.FloatVector)\n    .withDimension(768)\n    .build();\n\nFieldType link = FieldType.newBuilder()\n    .withName(\"link\")\n    .withDataType(DataType.VarChar)\n    .withMaxLength(512)\n    .build();\n\nFieldType reading_time = FieldType.newBuilder()\n    .withName(\"reading_time\")\n    .withDataType(DataType.Int64)\n    .build();\n\nFieldType publication = FieldType.newBuilder()\n    .withName(\"publication\")\n    .withDataType(DataType.VarChar)\n    .withMaxLength(512)\n    // This field is set as the partition key.\n    .withPartitionKey(true)\n    .build();\n\nFieldType claps = FieldType.newBuilder()\n    .withName(\"claps\")\n    .withDataType(DataType.Int64)\n    .build();\n\nFieldType responses = FieldType.newBuilder()\n    .withName(\"responses\")\n    .withDataType(DataType.Int64)\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "    .build();",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcn5dAYahBFP3hBBg5jeqIOIe",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the main function",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\nCLUSTER_ENDPOINT := \"YOUR_CLUSTER_ENDPOINT\"\nTOKEN := \"YOUR_CLUSTER_TOKEN\"\nCOLLNAME := \"medium_articles_2020\"\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "DATA_FILE := \"../../medium_articles_2020_dpr.json\"",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// 1. Connect to cluster\nconnParams := client.Config{\n    Address: CLUSTER_ENDPOINT,\n    APIKey:  TOKEN,\n}\n\nconn, err := client.NewClient(context.Background(), connParams)\n\nif err != nil {\n    log.Fatal(\"Failed to connect to Zilliz Cloud:\", err.Error())\n}\n\n// 2. Create collection\n\n// Define fields\nid := entity.NewField().\n    WithName(\"id\").\n    WithDataType(entity.FieldTypeInt64).\n    WithIsPrimaryKey(true)\n\ntitle := entity.NewField().\n    WithName(\"title\").\n    WithDataType(entity.FieldTypeVarChar).\n    WithMaxLength(512)\n\ntitle_vector := entity.NewField().\n    WithName(\"title_vector\").\n    WithDataType(entity.FieldTypeFloatVector).\n    WithDim(768)\n\nlink := entity.NewField().\n    WithName(\"link\").\n    WithDataType(entity.FieldTypeVarChar).\n    WithMaxLength(512)\n\nreading_time := entity.NewField().\n    WithName(\"reading_time\").\n    WithDataType(entity.FieldTypeInt64)\n\n// The following field is set as the partition key.\npublication := entity.NewField().\n    WithName(\"publication\").\n    WithDataType(entity.FieldTypeVarChar).\n    WithMaxLength(512).\n    WithIsPartitionKey(true)\n\nclaps := entity.NewField().\n    WithName(\"claps\").\n    WithDataType(entity.FieldTypeInt64)\n\nresponses := entity.NewField().\n    WithName(\"responses\").\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "    WithDataType(entity.FieldTypeInt64)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 22,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnnMojM8kZbRvdzOkFqXnwbc",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "After you have defined the fields, set other necessary parameters.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnMC4mdkaZY4IdGdqX78xvoc",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# 3. Define index parameters\nindex_params = MilvusClient.prepare_index_params()\n\nindex_params.add_index(\n    field_name=\"title_vector\",\n    index_type=\"AUTOINDEX\",\n    metric_type=\"L2\"\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ")",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnPcQrT3SahHcebY4JDt2Jbg",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// 3. Build the requst for creating a collection\n\n// You should include the following in the async function declaration.\n\nconst collection_name = \"medium_articles\";\n\nconst req = {\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "    collection_name",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ": collectionName",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ",\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "    fields",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ": fields,",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "}",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnXkEUuWvmoiB5mCzopZ6Rwe",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// 3. Build the schema\n\n// You should include the following in the main function\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "CreateCollectionParam createCollectionParam = CreateCollectionParam.newBuilder()\n    .withCollectionName(collectionName)\n    .addFieldType(id)\n    .addFieldType(title)\n    .addFieldType(title_vector)\n    .addFieldType(link)\n    .addFieldType(reading_time)\n    .addFieldType(publication)\n    .addFieldType(claps)\n    .addFieldType(responses)\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "    .build();",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnQWXDgiJKlOpRC2CqaBQwpz",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// Define schema\nschema := &entity.Schema{\n    CollectionName: COLLNAME,\n    AutoID:         true,\n    Fields: []*entity.Field{\n        id,\n        title,\n        title_vector,\n        link,\n        reading_time,\n        publication,\n        claps,\n        responses,\n    },\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "}",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 22,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnK8aqJnhETgDU383FThK0Th",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Finally, you can create a collection.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnUHHaJC7gW3UPbUMWkh1SDO",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# 4. Create a collection\nclient.create_collection(\n    collection_name=COLLECTION_NAME,\n    schema=schema,\n    index_params=index_params\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ")",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnWcNYSZuOD6VsiRkGBqY3ke",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "3",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ". Create collection\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "res = await client.createCollection({\n    collection_name: collectionName,\n    fields: fields,\n    // As an alternative, you can set the partition key by its name when creating a collection.\n    // partition_key_field: \"publication\"\n})\n\nconsole.log(res)\n\n// Output\n// \n// { error_code: 'Success', reason: '', code: 0 }\n// \n\n// 4. Create index\nres = await client.createIndex({\n    collection_name: collectionName,\n    field_name: \"title_vector\",\n    index_type: \"IVF_FLAT\",\n    metric_type: \"L2\",\n    params: {\n        nlist: 16384\n    }\n})\n\nconsole.log(res)\n\n// Output\n// \n// { error_code: 'Success', reason: '', code: 0 }\n// \n\nres = await client.loadCollection({\n    collection_name: collectionName\n})\n\nconsole.log(res)  \n\n// Output\n// \n// { error_code: 'Success', reason: '', code: 0 }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnkyJCHtWFVnf3ZKcKkRaFYf",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// 3. Create collection\nR<RpcStatus> collection = client.createCollection(createCollectionParam);\n\nif (collection.getException() != null) {\n    System.err.println(\"Failed to create collection: \" + collection.getException().getMessage());\n    return;\n}\n\nSystem.out.println(\"Collection created!\");\n\n// Output:\n// Collection created!\n\n\n// 4. Create index\nCreateIndexParam createIndexParam = CreateIndexParam.newBuilder()\n    .withCollectionName(collectionName)\n    .withFieldName(\"title_vector\")\n    .withIndexName(\"title_vector_index\")\n    .withIndexType(IndexType.AUTOINDEX)\n    .withMetricType(MetricType.L2)\n    .build();\n\nR<RpcStatus> res = client.createIndex(createIndexParam);\n\nif (res.getException() != null) {\nSystem.err.println(\"Failed to create index: \" + res.getException().getMessage());\nreturn;\n}\n\nSystem.out.println(\"Index created!\");\n\n// Output:\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// Index created!",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnY1IpfYsz5mgP8dtraY5Oyf",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// Create collection\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "err = conn.CreateCollection(context.Background(), schema, 2)\n\nif err != nil {\n    log.Fatal(\"Failed to create collection:\", err.Error())\n}\n\n// Create index for cluster\nindex, err := entity.NewIndexAUTOINDEX(entity.MetricType(\"L2\"))\n\nif err != nil {\n    log.Fatal(\"Failed to prepare the index:\", err.Error())\n}\n\nfmt.Println(index.Name())\n\n// Output: \n//\n// AUTOINDEX\n\nerr = conn.CreateIndex(context.Background(), COLLNAME, \"title_vector\", index, false)\n\nif err != nil {\n    log.Fatal(\"Failed to create the index:\", err.Error())\n}\n\n// Load collection\nloadCollErr := conn.LoadCollection(context.Background(), COLLNAME, false)\n\nif loadCollErr != nil {\n    log.Fatal(\"Failed to load collection:\", loadCollErr.Error())\n}\n\n// Get load progress\nprogress, err := conn.GetLoadingProgress(context.Background(), COLLNAME, nil)\n\nif err != nil {\n    log.Fatal(\"Failed to get loading progress:\", err.Error())\n}\n\nfmt.Println(\"Loading progress:\", progress)\n\n// Output: \n//\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// Loading progress: 100",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 22,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnrxyp7KTOibWRUOCtpdjfr9",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Insert data",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnIi5fElMFMGLWXhRfL5JgRh",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Once the collection is ready, start inserting data as follows:",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnOOu6AtAR7TjxYQf9RJl0fc",
        "block_type": 5,
        "heading3": {
          "elements": [
            {
              "text_run": {
                "content": "Prepare data",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnGjpLkIjJpVaSBHSfHmFXme",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "with open(DATASET_PATH) as f:\n    data = json.load(f)\n    list_of_rows = data['rows']\n\n    data_rows = []\n    for row in list_of_rows:\n        # Remove the id field because the primary key has auto_id enabled.\n        del row['id']\n        # Other keys except the title and title_vector fields in the row \n        # will be treated as dynamic fields.\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "        data_rows.append(row)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnC7ohOJXYBlLRlRYulVen9d",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the async function declaration\n\n// 5. prepare data\nconst data = JSON.parse(fs.readFileSync(data_file, {encoding: \"utf-8\"}))\n\n// read rows\nconst rows = data[\"rows\"]\nconst row = rows[0]\n\nconsole.log(Object.keys(row))\n\n// Output\n// \n// [\n//   'id',\n//   'title',\n//   'title_vector',\n//   'link',\n//   'reading_time',\n//   'publication',\n//   'claps',\n//   'responses'\n// ]\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnDq10XK0WcZ6xzcmRZeOe8g",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the main function\n\n// 5. prepare data\nString content;\n\n// read a local file\nPath file = Path.of(data_file);\ntry {\n    content = Files.readString(file);\n} catch (Exception e) {\n    System.err.println(\"Failed to read file: \" + e.getMessage());\n    return;\n}\n\nSystem.out.println(\"Successfully read file\");\n\n// Output:\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// Successfully read file",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnI2QuVoqb78dOtQdc4d2Xsf",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the main function\n\n// 6. Read the dataset\nfile, err := os.ReadFile(DATA_FILE)\nif err != nil {\n    log.Fatal(\"Failed to read file:\", err.Error())\n}\n\nvar data Dataset\n\nif err := json.Unmarshal(file, &data); err != nil {\n    log.Fatal(err.Error())\n}\n\nfmt.Println(\"Dataset loaded, row number: \", len(data.Rows))\n\n// Output: \n//\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// Dataset loaded, row number:  5979",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 22,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcn1ZaCJ8eOEIXUEoKznohL2b",
        "block_type": 5,
        "heading3": {
          "elements": [
            {
              "text_run": {
                "content": "Insert data",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnnitXxB7Lmplmf1jXVjyNOh",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "# 7. Insert data\nres = client.insert(\n    collection_name=COLLECTION_NAME,\n    data=data_rows,\n)\n\n# Output\n#\n# {\n#     \"insert_count\": 5979\n# }\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "time.sleep(5000)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnSdz9e6n8OaQaQf5zTDqs4a",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the async function declaration\n\n// 6. insert data\nres = await client.insert({\n    collection_name: collectionName,\n    data: rows\n})\n\nconsole.log(res)\n\n// Output\n// \n// {\n//   succ_index: [\n//      0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,\n//     12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,\n//     24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n//     36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\n//     48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n//     60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n//     72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83,\n//     84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95,\n//     96, 97, 98, 99,\n//     ... 5879 more items\n//   ],\n//   err_index: [],\n//   status: { error_code: 'Success', reason: '', code: 0 },\n//   IDs: { int_id: { data: [Array] }, id_field: 'int_id' },\n//   acknowledged: false,\n//   insert_cnt: '5979',\n//   delete_cnt: '0',\n//   upsert_cnt: '0',\n//   timestamp: '445316728739856387'\n// }\n// \n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "await sleep(5000)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnNlq4VvSGmY7SQ6TkVPOONf",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the main function\n\n// Load dataset\nJSONObject dataset = JSON.parseObject(content);\n\n// Insert your data in rows, all the fields not pre-defined in the schema \n// are recognized as pre-defined schema\nList<JSONObject> rows = getRows(dataset.getJSONArray(\"rows\"), 1000);\n\nInsertParam insertParam = InsertParam.newBuilder()\n    .withCollectionName(collectionName)\n    .withRows(rows)\n    .build();\n\nR<MutationResult> insertResponse = client.insert(insertParam);\n\nif (insertResponse.getStatus() != R.Status.Success.getCode()) {\n    System.err.println(insertResponse.getMessage());\n}\n\nMutationResultWrapper mutationResultWrapper = new MutationResultWrapper(insertResponse.getData());\n\nSystem.out.println(\"Successfully insert entities: \" + mutationResultWrapper.getInsertCount());  \n\n// Output:\n// Successfully insert entities: 1000\n\n// wait for a while\ntry {\n    // pause execution for 5 seconds\n    Thread.sleep(5000);\n} catch (InterruptedException e) {\n    // handle the exception\n    Thread.currentThread().interrupt();\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "} ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnNTDIIsbHbT8GadCE5yE8yN",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// You should include the following in the main function\n\n// 6. Insert data\nfmt.Println(\"Start inserting ...\")\n\n// Output: \n//\n// Start inserting ...\n\nrows := make([]interface{}, 0, 1)\n\nfor i := 0; i < len(data.Rows); i++ {\n    rows = append(rows, data.Rows[i])\n}\n\ncol, err := conn.InsertRows(context.Background(), COLLNAME, \"\", rows)\n\nif err != nil {\n    log.Fatal(\"Failed to insert rows:\", err.Error())\n}\n\nfmt.Println(\"Inserted entities: \", col.Len())\n\n// Output: \n//\n// Inserted entities:  5979\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "time.Sleep(5 * time.Second)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 22,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnhezVKF7nYAOFg52mLuCUFh",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Use partition key",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcndZB8KlnCaYWY3wo0ADtilh",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Once you have indexed and loaded the collection as well as inserted data, you can conduct a similarity search using the partition key. ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnJxz9V0ozliZPHU5dTzMOTh",
        "block_type": 19,
        "callout": {
          "background_color": 2,
          "border_color": 2,
          "emoji_id": "blue_book"
        },
        "children": [
          "doxcnlvbl7ClmkdSAK5CgrBbWhh",
          "doxcnSVGT4x0cEQmnnKM7ek88Hg",
          "doxcn5G3nkjL2aaVxJQr8WtDyLL",
          "doxcnZaguJckD86gsI8MHRjNusf",
          "doxcnnPld5aDL8lQs883GWtolOg"
        ],
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnlvbl7ClmkdSAK5CgrBbWhh",
        "block_type": 2,
        "parent_id": "doxcnJxz9V0ozliZPHU5dTzMOTh",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Notes",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnSVGT4x0cEQmnnKM7ek88Hg",
        "block_type": 2,
        "parent_id": "doxcnJxz9V0ozliZPHU5dTzMOTh",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "To conduct a similarity search using the partition key, you should include either of the following in the boolean expression of the search request:",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcn5G3nkjL2aaVxJQr8WtDyLL",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "expr='<partition_key>==\"xxxx\"'",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "doxcnJxz9V0ozliZPHU5dTzMOTh"
      },
      {
        "block_id": "doxcnZaguJckD86gsI8MHRjNusf",
        "block_type": 12,
        "bullet": {
          "elements": [
            {
              "text_run": {
                "content": "expr='<partition_key> in [\"xxx\", \"xxx\"]'",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "doxcnJxz9V0ozliZPHU5dTzMOTh"
      },
      {
        "block_id": "doxcnnPld5aDL8lQs883GWtolOg",
        "block_type": 2,
        "parent_id": "doxcnJxz9V0ozliZPHU5dTzMOTh",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "Do replace ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "<partition_key>",
                "text_element_style": {
                  "bold": false,
                  "inline_code": true,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": " with the name of the field that is designated as the partition key.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcn3L0elQsnKEmaHaXdK83gGT",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "res = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[data_rows[0]['title_vector']],\n    filter='claps > 30 and reading_time < 10',\n    limit=3,\n    output_fields=[\"title\", \"reading_time\", \"claps\"],\n    search_params={\"metric_type\": \"L2\", \"params\": {}}\n)\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "print(result)",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 49,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnpWleoAd3es4xSlxRpKlgHe",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "6",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": ". ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "Conduct an ANN search",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "\n\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "res = await client.search({\n    collection_name: collectionName,\n    vector: rows[0].title_vector,\n    limit: 3,\n    filter: \"claps > 30 and reading_time < 10 and publication in ['Towards Data Science', 'Personal Growth']\",\n    output_fields: [\"title\", \"link\"]\n});\n\nconsole.log(res);\n\n// Output\n// \n// {\n//   status: { error_code: 'Success', reason: '', code: 0 },\n//   results: [\n//     {\n//       score: 0.37674015760421753,\n//       id: '5641',\n//       title: 'Why The Coronavirus Mortality Rate is Misleading',\n//       link: 'https://towardsdatascience.com/why-the-coronavirus-mortality-rate-is-misleading-cc63f571b6a6'\n//     },\n//     {\n//       score: 0.436093807220459,\n//       id: '938',\n//       title: 'Mortality Rate As an Indicator of an Epidemic Outbreak',\n//       link: 'https://towardsdatascience.com/mortality-rate-as-an-indicator-of-an-epidemic-outbreak-704592f3bb39'\n//     },\n//     {\n//       score: 0.49443864822387695,\n//       id: '842',\n//       title: 'Choosing the right performance metrics can save lives against Coronavirus',\n//       link: 'https://towardsdatascience.com/choosing-the-right-performance-metrics-can-save-lives-against-coronavirus-2f27492f6638'\n//     }\n//   ]\n// }\n// \n\n// 7. Get collection info\n\nres = await client.describeCollection({\n    collection_name: collectionName\n})\n\nconsole.log(res);\n\n// Output\n// \n// {\n//   virtual_channel_names: [ 'by-dev-rootcoord-dml_11_445311585782775508v0' ],\n//   physical_channel_names: [ 'by-dev-rootcoord-dml_11' ],\n//   aliases: [],\n//   start_positions: [],\n//   properties: [],\n//   status: { error_code: 'Success', reason: '', code: 0 },\n//   schema: {\n//     fields: [\n//       [Object], [Object],\n//       [Object], [Object],\n//       [Object], [Object],\n//       [Object], [Object]\n//     ],\n//     name: 'medium_articles_2020',\n//     description: '',\n//     autoID: false,\n//     enable_dynamic_field: false\n//   },\n//   collectionID: '445311585782775508',\n//   created_timestamp: '445316810423664644',\n//   created_utc_timestamp: '1698748819060',\n//   shards_num: 1,\n//   consistency_level: 'Bounded',\n//   collection_name: 'medium_articles_2020',\n//   db_name: 'default',\n//   num_partitions: '64'\n// }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// ",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 30,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnTJKNj1ljrtGEPNSsRUj2zh",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// 7. Search vectors\n\nList<List<Float>> queryVectors = new ArrayList<>();\nList<Float> queryVector1 = rows.get(0).getJSONArray(\"title_vector\").toJavaList(Float.class);\nqueryVectors.add(queryVector1);\n\nList<String> outputFields = new ArrayList<>();\noutputFields.add(\"title\");\noutputFields.add(\"link\");\n\n// Search vectors in a collection\n\nSearchParam searchParam = SearchParam.newBuilder()\n    .withCollectionName(collectionName)\n    .withVectorFieldName(\"title_vector\")\n    .withVectors(queryVectors)\n    .withTopK(5)   \n    .withMetricType(MetricType.L2)  \n    .withParams(\"{\\\"nprobe\\\":10,\\\"offset\\\":2, \\\"limit\\\":3}\")\n    .withConsistencyLevel(ConsistencyLevelEnum.BOUNDED)\n    .withOutFields(outputFields)\n    .withExpr(\"(publication == \\\"Towards Data Science\\\") and ((claps > 1500 and responses > 15) or (10 < reading_time < 15))\")\n    .build();\n\nR<SearchResults> response = client.search(searchParam);\n\nSearchResultsWrapper wrapper = new SearchResultsWrapper(response.getData().getResults());\n\nList<List<JSONObject>> results = new ArrayList<>();\n\nfor (int i = 0; i < queryVectors.size(); ++i) {\n    List<SearchResultsWrapper.IDScore> scores = wrapper.getIDScore(i);\n    List<JSONObject> entities = new ArrayList<>();\n    for (int j = 0; j < scores.size(); ++j) {\n        SearchResultsWrapper.IDScore score = scores.get(j);\n        JSONObject entity = new JSONObject(1, true);\n        entity.put(\"id\", score.getLongID());\n        entity.put(\"distance\", score.getScore());\n        entity.put(\"title\", scores.get(j).get(\"title\"));\n        entity.put(\"link\", scores.get(j).get(\"link\"));\n        entities.add(entity);\n    }\n    \n    results.add(entities);\n} \n\nSystem.out.println(results);\n\n// Output:\n// [[\n//     {\n//         \"distance\": 0.85477614,\n//         \"link\": \"https://towardsdatascience.com/finding-optimal-nba-physiques-using-data-visualization-with-python-6ce27ac5b68f\",\n//         \"id\": 445297206350548235,\n//         \"title\": \"Finding optimal NBA physiques using data visualization with Python\"\n//     },\n//     {\n//         \"distance\": 0.8702322,\n//         \"link\": \"https://towardsdatascience.com/understanding-nlp-how-ai-understands-our-languages-77601002cffc\",\n//         \"id\": 445297206350548216,\n//         \"title\": \"Understanding Natural Language Processing: how AI understands our languages\"\n//     },\n//     {\n//         \"distance\": 0.9109591,\n//         \"link\": \"https://towardsdatascience.com/rage-quitting-cancer-research-5e79cb04801\",\n//         \"id\": 445297206350548215,\n//         \"title\": \"Rage Quitting Cancer Research\"\n//     },\n//     {\n//         \"distance\": 0.9840777,\n//         \"link\": \"https://towardsdatascience.com/data-cleaning-in-python-the-ultimate-guide-2020-c63b88bf0a0d\",\n//         \"id\": 445297206350548209,\n//         \"title\": \"Data Cleaning in Python: the Ultimate Guide (2020)\"\n//     },\n//     {\n//         \"distance\": 1.091625,\n//         \"link\": \"https://towardsdatascience.com/top-10-in-demand-programming-languages-to-learn-in-2020-4462eb7d8d3e\",\n//         \"id\": 445297206350548205,\n//         \"title\": \"Top 10 In-Demand programming languages to learn in 2020\"\n//     }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// ]]",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 29,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnXphgZhN2R8a4AJLGcwERxc",
        "block_type": 14,
        "code": {
          "elements": [
            {
              "text_run": {
                "content": "// Search\n\nfmt.Println(\"Start searching ...\")\n\n// Output: \n//\n// Start searching ...\n\nvectors := []entity.Vector{}\n\nfor _, row := range data.Rows[:1] {\n    vector := make(entity.FloatVector, 0, 768)\n    vector = append(vector, row.TitleVector...)\n    vectors = append(vectors, vector)\n}\n\nsp, _ := entity.NewIndexAUTOINDEXSearchParam(1)\n\nlimit := client.WithLimit(10)\noffset := client.WithOffset(0)\ntopK := 5\noutputFields := []string{\"title\", \"claps\", \"publication\", \"responses\", \"reading_time\"}\nexpr := \"(publication == \\\"Towards Data Science\\\") and ((claps > 1500 and responses > 15) or (10 < reading_time < 15))\"\n\nres, err := conn.Search(\n    context.Background(),    // context\n    COLLNAME,                // collectionName\n    []string{},              // partitionNames\n    expr,                    // expr\n    outputFields,            // outputFields\n    vectors,                 // vectors\n    \"title_vector\",          // vectorField\n    entity.MetricType(\"L2\"), // metricType\n    topK,                    // topK\n    sp,                      // sp\n    limit,                   // opts\n    offset,                  // opts\n)\n\nif err != nil {\n    log.Fatal(\"Failed to insert rows:\", err.Error())\n}\n\nfmt.Println(resultsToJSON(res))\n\n// Output: \n// [\n//  {\n//      \"counts\": 5,\n//      \"distances\": [\n//          0.37674016,\n//          0.45862228,\n//          0.5037479,\n//          0.52556163,\n//          0.58774835\n//      ],\n//      \"rows\": [\n//          {\n//              \"claps\": 2900,\n//              \"publication\": \"Towards Data Science\",\n//              \"reading_time\": 9,\n//              \"responses\": 47,\n//              \"title\": \"Why The Coronavirus Mortality Rate is Misleading\"\n//          },\n//          {\n//              \"claps\": 15,\n//              \"publication\": \"Towards Data Science\",\n//              \"reading_time\": 12,\n//              \"responses\": 0,\n//              \"title\": \"Heart Disease Risk Assessment Using Machine Learning\"\n//          },\n//          {\n//              \"claps\": 161,\n//              \"publication\": \"Towards Data Science\",\n//              \"reading_time\": 13,\n//              \"responses\": 3,\n//              \"title\": \"New Data Shows a Lower Covid-19 Fatality Rate\"\n//          },\n//          {\n//              \"claps\": 20,\n//              \"publication\": \"Towards Data Science\",\n//              \"reading_time\": 11,\n//              \"responses\": 1,\n//              \"title\": \"Common Pipenv Errors\"\n//          },\n//          {\n//              \"claps\": 61,\n//              \"publication\": \"Towards Data Science\",\n//              \"reading_time\": 12,\n//              \"responses\": 0,\n//              \"title\": \"Data quality impact on the dataset\"\n//          }\n//      ]\n//  }\n",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            },
            {
              "text_run": {
                "content": "// ]",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "language": 22,
            "wrap": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcnVJ3FJzedK1LHZsN8FOzEKd",
        "block_type": 4,
        "heading2": {
          "elements": [
            {
              "text_run": {
                "content": "Use cases",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        },
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg"
      },
      {
        "block_id": "doxcn8GHLvBohg8SyIKOTmKloNd",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "To achieve better search performance and enable multi-tenancy, you can utilize the partition key feature. This can be done by assigning a tenant-specific value as the partition key field for each entity. When searching or querying the collection, you can filter entities by the tenant-specific value by including the partition key field in the boolean expression. This approach ensures data isolation by tenants and avoids scanning unnecessary partitions.",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      },
      {
        "block_id": "doxcnZAhsS3RVlcZpena1MZeI7c",
        "block_type": 2,
        "parent_id": "DzvBdV7rroOoN8xlM5zcs8bxnBg",
        "text": {
          "elements": [
            {
              "text_run": {
                "content": "",
                "text_element_style": {
                  "bold": false,
                  "inline_code": false,
                  "italic": false,
                  "strikethrough": false,
                  "underline": false
                }
              }
            }
          ],
          "style": {
            "align": 1,
            "folded": false
          }
        }
      }
    ],
    "counts": 53
  }
}