---
title: "適切なクラスタータイプの選択 | Cloud"
slug: /cu-types-explained
sidebar_label: "クラスタータイプ"
beta: FALSE
added_since: FALSE
last_modified: FALSE
deprecate_since: FALSE
notebook: FALSE
description: "Zilliz Cloudでクラスターを作成する際、適切なCompute Unit（CU）を選択することは重要なステップです。CUはデータの並列処理に使用される基本的なコンピュートリソース単位であり、異なるクラスタータイプはCPU、メモリ、ストレージの異なる組み合わせで構成されます。 | Cloud"
type: origin
token: UgqvwKh2QiKE1kkYNLJcaHt0nkg
sidebar_position: 2
keywords:
  - zilliz
  - vector database
  - cloud
  - cu
  - select
  - Video search
  - AI Hallucination
  - AI Agent
  - semantic search

---

import Admonition from '@theme/Admonition';


# 適切なクラスタータイプの選択

Zilliz Cloudでクラスターを作成する際、適切なCompute Unit（CU）を選択することは重要なステップです。CUはデータの並列処理に使用される基本的なコンピュートリソース単位であり、異なるクラスタータイプはCPU、メモリ、ストレージの異なる組み合わせで構成されます。

## クラスタータイプの理解\{#understand-cluster-types}

Zilliz Cloudは以下のクラスタータイプを提供しています：**パフォーマンス最適化、容量最適化**、および**階層ストレージ**。

以下の表は、3つのクラスタータイプを異なる観点から比較したものです。クラスタータイプ間の容量および性能に関する詳細な比較については、[最適なクラスタータイプの選択](./cu-types-explained#select-an-optimal-cluster-type)を参照してください。

<table>
   <tr>
     <th><p>クラスタータイプ</p></th>
     <th><p>検索QPS</p></th>
     <th><p>検索レイテンシ</p></th>
     <th><p>クエリCUあたりの容量</p></th>
     <th><p>100万ベクトルあたりのコスト</p></th>
   </tr>
   <tr>
     <td><p><strong>パフォーマンス最適化</strong></p></td>
     <td><p>500~1500</p></td>
     <td><p>10ミリ秒未満</p></td>
     <td><p>1.5百万768次元ベクトル</p></td>
     <td><p>$65/月から</p></td>
   </tr>
   <tr>
     <td><p><strong>容量最適化</strong></p></td>
     <td><p>100~300</p></td>
     <td><p>数十ミリ秒</p></td>
     <td><p>5百万768次元ベクトル</p></td>
     <td><p>$20/月から</p></td>
   </tr>
   <tr>
     <td><p><strong>階層ストレージ</strong></p></td>
     <td><p>5~20</p></td>
     <td><p>数百ミリ秒</p></td>
     <td><p>2千万768次元ベクトル</p></td>
     <td><p>$7/月から</p></td>
   </tr>
</table>

### パフォーマンス最適化クラスター\{#performance-optimized-cluster}

- 低レイテンシと高スループットを重視するシナリオ向けに調整されています。

- 生成AI、レコメンドシステム、チャットボットなどのリアルタイムアプリケーションに最適です。

### 容量最適化クラスター\{#capacity-optimized-cluster}

- 大規模データセットを処理するために設計されており、検索パフォーマンスは控えめながらもパフォーマンス最適化と比べて5倍のデータ容量を誇ります。

- 大規模非構造化データ検索、著作権検出、本人確認に最適です。

### 階層ストレージクラスター\{#tiered-storage-cluster}

- 明確なホットデータとコールドデータのパターンを持つ超大規模でコストに敏感なワークロードに最適です。

- 大量のデータを低コストで保存する必要があるアプリケーションに最適です。階層ストレージクラスターの容量は、容量最適化クラスターよりも4倍です。

<Admonition type="info" icon="📘" title="注釈">

<p>階層ストレージクラスターを選択するには、クラスターに少なくとも8つのクエリCUが必要です。</p>

</Admonition>

## 最適なクラスタータイプの選択\{#select-an-optimal-cluster-type}

クラスタータイプを選択する際には、データ量、パフォーマンスの期待、予算を考慮してください。ベクトルデータの規模（ベクトル数および次元数の両面から）は、クラスターリソース割り当てを決定する上で重要な役割を果たします。

### 容量評価\{#assess-capacity}

クラスターが収容できるエンティティ数は、クラスターのクエリCU容量によって異なります。

以下の参考表は、ベクトル次元と合計ベクトル数を考慮しつつ、1つのクエリCUを持つパフォーマンス最適化と容量最適化の容量を示しています。データ量に必要なクエリCU数の見積もりについては、[計算ツール](https://zilliz.com/pricing#calculator)をご使用ください。

<table>
   <tr>
     <th><p>ベクトル次元</p></th>
     <th><p>パフォーマンス最適化（クエリCUあたりの最大ベクトル数）</p></th>
     <th><p>容量最適化（クエリCUあたりの最大ベクトル数）</p></th>
     <th><p>階層ストレージ（クエリCUあたりの最大ベクトル数）</p></th>
   </tr>
   <tr>
     <td><p>128</p></td>
     <td><p>750万</p></td>
     <td><p>2500万</p></td>
     <td><p>1億</p></td>
   </tr>
   <tr>
     <td><p>256</p></td>
     <td><p>450万</p></td>
     <td><p>1500万</p></td>
     <td><p>6000万</p></td>
   </tr>
   <tr>
     <td><p>512</p></td>
     <td><p>225万</p></td>
     <td><p>750万</p></td>
     <td><p>3000万</p></td>
   </tr>
   <tr>
     <td><p>768</p></td>
     <td><p>150万</p></td>
     <td><p>500万</p></td>
     <td><p>2000万</p></td>
   </tr>
   <tr>
     <td><p>1024</p></td>
     <td><p>112.5万</p></td>
     <td><p>375万</p></td>
     <td><p>1500万</p></td>
   </tr>
</table>

<Admonition type="info" icon="📘" title="注釈">

<p>上記の指標は、プライマリキーとベクトルのみを考慮したテストに基づいています。データセットに追加のスカラー項目（id、ラベル、キーワードなど）がある場合、実際の容量は変わる可能性があります。正確な評価のためには、個人テストを実施することが賢明です。</p>

</Admonition>

### パフォーマンス評価\{#evaluate-performance}

特にレイテンシとクエリ毎秒（QPS）などのパフォーマンス指標は重要です。パフォーマンス最適化クラスターは、特に標準の `top-k` 値（10〜250）において、レイテンシとスループットで容量最適化クラスターよりも明確に優れています。

以下の表は、各クラスタータイプがQPSの観点からどのようにパフォーマンスを発揮するかのテスト結果を示しています。

<table>
   <tr>
     <th><p>top_k</p></th>
     <th><p>パフォーマンス最適化クラスターのQPS（768次元100万ベクトル）</p></th>
     <th><p>容量最適化クラスターのQPS（768次元500万ベクトル）</p></th>
   </tr>
   <tr>
     <td><p>10</p></td>
     <td><p>520</p></td>
     <td><p>100</p></td>
   </tr>
   <tr>
     <td><p>100</p></td>
     <td><p>440</p></td>
     <td><p>80</p></td>
   </tr>
   <tr>
     <td><p>250</p></td>
     <td><p>270</p></td>
     <td><p>60</p></td>
   </tr>
   <tr>
     <td><p>1000</p></td>
     <td><p>150</p></td>
     <td><p>40</p></td>
   </tr>
</table>

以下の表は、各クラスタータイプがレイテンシの観点からどのようにパフォーマンスを発揮するかのテスト結果を示しています。

<table>
   <tr>
     <th><p>top_k</p></th>
     <th><p>パフォーマンス最適化クラスターのレイテンシ（768次元100万ベクトル）</p></th>
     <th><p>容量最適化クラスターのレイテンシ（768次元500万ベクトル）</p></th>
   </tr>
   <tr>
     <td><p>10</p></td>
     <td><p>&lt; 10 ミリ秒</p></td>
     <td><p>&lt; 50 ミリ秒</p></td>
   </tr>
   <tr>
     <td><p>100</p></td>
     <td><p>&lt; 10 ミリ秒</p></td>
     <td><p>&lt; 50 ミリ秒</p></td>
   </tr>
   <tr>
     <td><p>250</p></td>
     <td><p>&lt; 10 ミリ秒</p></td>
     <td><p>&lt; 50 ミリ秒</p></td>
   </tr>
   <tr>
     <td><p>1000</p></td>
     <td><p>10 - 20 ミリ秒</p></td>
     <td><p>50 - 100 ミリ秒</p></td>
   </tr>
</table>

## シナリオの分解\{#scenario-breakdown}

800万枚の画像ライブラリを備えた画像レコメンドアプリケーションを構築しているとします。ライブラリ内の各画像は768次元の埋め込みベクトルで表されます。目標は、1000のQPSでレコメンドリクエストを迅速に処理し、30ミリ秒以内に上位100件の画像レコメンドを提供することです。

この要件に適したクラスタータイプおよびクエリCUを選択するには、以下の手順に従います：

1. **レイテンシ評価**：パフォーマンス最適化クラスターは、30ミリ秒のレイテンシ要件を満たす唯一のタイプです。

1. **容量評価**：1つのパフォーマンス最適化クラスター（1クエリCU）は1.5百万の768次元ベクトルを格納できます。800万ベクトルすべてを格納するには、少なくとも6つのクエリCUが必要です。

1. **スループットチェック**：`top-k` 設定が100の場合、パフォーマンス最適化クラスターは440のQPSを達成できます。一定の1000QPSを維持するには、レプリカ数を3倍にする必要があります。

結論として、このシナリオではパフォーマンス最適化クラスターが最適です。各レプリカが6つのクエリCUで構成される3つのレプリカの構成が、完璧に適しています。