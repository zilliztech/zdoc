---
title: "ゼロダウンタイム移行 | Cloud"
slug: /zero-downtime-migration
sidebar_label: "ゼロダウンタイム移行"
beta: PUBLIC
notebook: FALSE
description: "ゼロダウンタイム移行により、データベースサービスは移行中も稼働し続け、データベースへの中断のないアクセスを提供します。これは以下の段階で構成されています | Cloud"
type: origin
token: BRd8wxYLJiKgpRk052EcKFEQnJe
sidebar_position: 2
keywords: 
  - zilliz
  - vector database
  - cloud
  - migrations
  - clusters
  - zero downtime
  - llm eval
  - Sparse vs Dense
  - Dense vector
  - Hierarchical Navigable Small Worlds

---

import Admonition from '@theme/Admonition';


# ゼロダウンタイム移行

ゼロダウンタイム移行により、データベースサービスは移行中も稼働し続け、データベースへの中断のないアクセスを提供します。これは以下の段階で構成されています:

- **初期化**:ソースクラスタを選択し、新しいターゲットクラスタを作成します。

- **移行**:既存のデータを移行し、増分データを同期します。

- **ファイナライズ**:遅延が10秒未満の場合は同期を停止し、ターゲットクラスタに切り替えます。

![Rpc5wqo0LharoIbD7GTcnsttn0g](/img/ja-JP/Rpc5wqo0LharoIbD7GTcnsttn0g.png)

<Admonition type="info" icon="📘" title="ノート">

<p>Zero Downtime Migrationは<strong>パブリックプレビュー</strong>中です。問題が発生した場合や関連コストについては、<a href="https://zilliz.com/contact-sales">Zilliz Cloudサポート</a>にお問い合わせください。</p>

</Admonition>

## 限界{#limits}

- Zero Downtime Migrationは、同じ組織内の移行のみをサポートします。組織間の移行はサポートされません。

- 移行過程では、ソースクラスタ内のすべてのデータベースが転送されます。特定のデータベースの部分的な移行はサポートされていません。

- 移行中は、ソースクラスターに対して、**AlterCollection**、**AlterCollectionField**、**CreateAlias**、**DropAlias**、**AlterAlias**、**RenameCollection**、**AlterDatabase**、**Import**のいずれの操作も実行できません。

- この機能は、新しい**専用クラスター**への移行にのみ使用できます。

- 進行中のZero Downtime Migrationジョブのキャンセルはサポートされていません。この機能は今後のリリースで利用可能になります。

- ゼロダウンタイム移行には、データ同期が停止し、クラスタ移行が完了するまでに約10秒のダウンタイムが必要です。

## 始める前に{#before-you-start}

- ソースクラスタはパブリックインターネットからアクセスできます。

- あなたには**組織オーナー**または**プロジェクト管理者**の役割が付与されています。必要な権限がない場合は、Zilliz Cloudの管理者にお問い合わせください。

## ステップ1:移行を開始する{#step-1-start-migration}

![zero-downtime-migration-1](/img/ja-JP/zero-downtime-migration-1.png)

1. [Zilliz Cloudコンソール](https://cloud.zilliz.com/login)にログインします。

1. プロジェクトページで、**移行**>**現在の組織内**を選択してください。

1. 表示されるダイアログボックスで、移行設定を構成してください

    - **ソースクラスタ**:移行元のクラスタを選択します。ソースクラスタで実行されているインポートジョブを含まないようにしてください。

    - **移行先**:**新しいクラスタ**を選択します。ゼロダウンタイム移行には、ターゲットとして新しい**専用**クラスタを作成する必要があります。

    - **移行タイプ**:「**ゼロダウンタイム移行**」を選択します。

        - **オフライン移行**:ソースクラスタへの書き込みを停止し、既存のデータのみを移行します。詳細については、「[オフライン移行](./offline-migration)」を参照してください。

        - **ゼロダウンタイム移行**:進行中の操作を中断することなく、ソースクラスタから既存および増分データを移行します。

1. これらの設定を行った後、「**次**へ」をクリックしてください。クラスター作成ページにリダイレクトされます。

## ステップ2:ターゲットとして新しい専用クラスタを作成します{#step-2-configure-the-target-cluster}

![zero-downtime-migration-2](/img/ja-JP/zero-downtime-migration-2.png)

1. [**新しいクラスタへの移行**]ページで、ターゲットクラスタを設定します。

    - **クラスター名:**新しいターゲットクラスターの名前を入力してください(例: cluster 01`)`。

    - **クラウドプロバイダー設定:**クラウドプロバイダー(AWS、Google Cloud、またはMicrosoft Azure)を選択し、プロジェクトのニーズに応じて追加の設定を構成します。

    クラスタの設定の詳細については、[クラスタ作成](./create-cluster)を参照してください。

1. 「**移行**」をクリックします。その後、移行ジョブが開始されます。

    - ソースクラスタは**Locked**状態になります。この間、ソースクラスタを削除することはできません。

    - ターゲット専用クラスタの詳細ページにリダイレクトされます。

## ステップ3:進行中の移行ジョブを監視する{#step-3-monitor-the-migration-job-in-progress}

![zero-downtime-migration-3](/img/ja-JP/zero-downtime-migration-3.png)

1. ターゲットクラスタの詳細ページで、上部の「**View Progress**」をクリックして、マイグレーションの進行状況ダイアログを開きます。

1. [**移行進行状況**]ダイアログボックスで、次の移行段階を監視します。

    **ステージ1:ターゲットクラスタを準備し、既存のデータを移行する**

    このステージでは、既存のデータをソースクラスタからターゲットクラスタに移行します。期間は転送されるデータの量によって異なり、大きなデータセットの場合は数時間かかる場合があります。

    <Admonition type="info" icon="📘" title="ノート">

    <p>この過程に時間がかかる場合は、このページを離れて他のタスクに取り組んでください。いつでも戻って、増分データ同期の進行状況を監視し続けることができます。</p>

    </Admonition>

    **ステージ2:増分データを同期する**

    この段階では、システムはソースクラスタに挿入された新しいデータをターゲットクラスタに継続的に同期します。ターゲットクラスタは**同期**状態を表示し、外部データの書き込みを受け付けないことを示します。この段階では、次の手順に従ってください

    1. **同期の遅延を監視する**

        - 同期の進行状況を監視するために、**ソース遅延**を秒単位で追跡します。このインジケータは、ソースクラスタとターゲットクラスタの最新データ間の時間差を示します。

        - **ソースの遅延**が10秒以下になると、データ同期を停止できることを示す電子メール通知が届きます。

        - **重要**:適切な待機期間を経ても同期の遅延が10秒以下にならない場合は、[Zilliz Cloudサポート](https://zilliz.com/contact-sales)にお問い合わせください。

    1. **データ同期を停止**

        - 先に進む前に、ソースクラスタへのすべての書き込みを停止し、同期の停止とクラスタの切り替えのために約10秒間のメンテナンスウィンドウを計画してください。

        - [**Lag Behind Source**]が許容可能なしきい値に達したら、チェックボックスをオンにします。**ソースクラスタへの書き込みを停止したことを確認**し、[**Stop Data Sync**]をクリックします。

        <Admonition type="info" icon="📘" title="ノート">

        <p>手動でデータ同期を停止しない場合、Zilliz Cloudは最大7日間同期を継続します。この期間を過ぎると、システムはリソースの浪費を防ぐために自動的に同期を停止し、移行ジョブが失敗します。</p>

        </Admonition>

## ターゲットクラスタへの切り替え{#switch-your-connection-to-the-target-cluster}

![zero-downtime-migration-4](/img/ja-JP/zero-downtime-migration-4.png)

データ同期が停止したら、**新しいクラスタへの切り取り**ステップに進んでください

1. [**Migration Progress**]ダイアログボックスで、[**View Connection Details**]をクリックします。ターゲットクラスタの詳細ページにリダイレクトされます。

1. クラスターの詳細ページで、ターゲットクラスターの状態を確認してください。**実行中**と表示されている場合、移行は成功しています。

1. 次に、提供された接続詳細を使用してターゲットクラスターに接続します。移行ジョブを完了するために、できるだけ早くこれを行うことをお勧めします。クラスターへの接続手順については、「[クラスタに接続](./connect-to-cluster)」を参照してください。

