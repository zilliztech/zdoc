---
title: "適切なクラスタータイプの選択 | BYOC"
slug: /cu-types-explained
sidebar_label: "クラスタータイプ"
beta: FALSE
added_since: FALSE
last_modified: FALSE
deprecate_since: FALSE
notebook: FALSE
description: "Zilliz Cloud でクラスターを作成する際、適切なコンピュートユニット (CU) を選択することは重要なステップです。CU はデータの並列処理に使用されるコンピュートリソースの基本単位であり、異なるクラスタータイプには CPU、メモリ、ストレージの異なる組み合わせが含まれます。 | BYOC"
type: origin
token: UgqvwKh2QiKE1kkYNLJcaHt0nkg
sidebar_position: 2
keywords:
  - zilliz
  - vector database
  - cloud
  - cu
  - select
  - lexical search
  - nearest neighbor search
  - Agentic RAG
  - rag llm architecture

---

import Admonition from '@theme/Admonition';


# 適切なクラスタータイプの選択

Zilliz Cloud でクラスターを作成する際、適切なコンピュートユニット (CU) を選択することは重要なステップです。CU はデータの並列処理に使用されるコンピュートリソースの基本単位であり、異なるクラスタータイプには CPU、メモリ、ストレージの異なる組み合わせが含まれます。

## クラスタータイプを理解する\{#understand-cluster-types}

Zilliz Cloud は以下のクラスタータイプを提供します：**パフォーマンス最適化**、**容量最適化**、および**階層ストレージ**。

以下の表は、3つのクラスタータイプを異なる観点から比較したものです。クラスタータイプ間の容量とパフォーマンスの詳細な比較については、[最適なクラスタータイプの選択](./cu-types-explained#select-an-optimal-cluster-type) に進んでください。

<table>
   <tr>
     <th><p>クラスタータイプ</p></th>
     <th><p>検索 QPS</p></th>
     <th><p>検索遅延</p></th>
     <th><p>1クエリCU容量</p></th>
     <th><p>100万ベクトルあたりのコスト</p></th>
   </tr>
   <tr>
     <td><p><strong>パフォーマンス最適化</strong></p></td>
     <td><p>500〜1500</p></td>
     <td><p>10ミリ秒未満</p></td>
     <td><p>150万 768次元ベクトル</p></td>
     <td><p>月額$65から</p></td>
   </tr>
   <tr>
     <td><p><strong>容量最適化</strong></p></td>
     <td><p>100〜300</p></td>
     <td><p>数十ミリ秒</p></td>
     <td><p>500万 768次元ベクトル</p></td>
     <td><p>月額$20から</p></td>
   </tr>
   <tr>
     <td><p><strong>階層ストレージ</strong></p></td>
     <td><p>5〜20</p></td>
     <td><p>数百ミリ秒</p></td>
     <td><p>2000万 768次元ベクトル</p></td>
     <td><p>月額$7から</p></td>
   </tr>
</table>

### パフォーマンス最適化クラスター\{#performance-optimized-cluster}

- 低遅延と高スループットを重視するシナリオに最適化されています。

- 生成AI、レコメンデーションシステム、チャットボットなど、リアルタイムアプリケーションに理想的です。

### 容量最適化クラスター\{#capacity-optimized-cluster}

- パフォーマンス最適化クラスターより5倍のデータ容量を備え、検索パフォーマンスは控えめになりますが、大規模データセットを処理するように設計されています。

- 大規模非構造化データ検索、著作権検出、本人確認に最適です。

## 最適なクラスタータイプの選択\{#select-an-optimal-cluster-type}

クラスタータイプを選択する際は、データ量、パフォーマンスの期待値、および予算を考慮してください。ベクトルデータの規模（ベクトル数と次元数）は、クラスターリソース割り当てを決定する上で重要な役割を果たします。

### 容量の評価\{#assess-capacity}

クラスターが収容できるエンティティ数は、クラスターのクエリCU容量に依存します。

以下の参照表は、ベクトル次元数と総ベクトル数を考慮した、1クエリCUを持つパフォーマンス最適化クラスターと容量最適化クラスターの容量を示しています。データ量に必要なクエリCU数の見積もりについては、[私たちの計算機](https://zilliz.com/pricing#calculator) を使用してください。

<table>
   <tr>
     <th><p>ベクトル次元数</p></th>
     <th><p>パフォーマンス最適化 (1クエリCUあたりの最大ベクトル数)</p></th>
     <th><p>容量最適化 (1クエリCUあたりの最大ベクトル数)</p></th>
     <th><p>階層ストレージ (1クエリCUあたりの最大ベクトル数)</p></th>
   </tr>
   <tr>
     <td><p>128</p></td>
     <td><p>750万</p></td>
     <td><p>2500万</p></td>
     <td><p>1億</p></td>
   </tr>
   <tr>
     <td><p>256</p></td>
     <td><p>450万</p></td>
     <td><p>1500万</p></td>
     <td><p>6000万</p></td>
   </tr>
   <tr>
     <td><p>512</p></td>
     <td><p>225万</p></td>
     <td><p>750万</p></td>
     <td><p>3000万</p></td>
   </tr>
   <tr>
     <td><p>768</p></td>
     <td><p>150万</p></td>
     <td><p>500万</p></td>
     <td><p>2000万</p></td>
   </tr>
   <tr>
     <td><p>1024</p></td>
     <td><p>112.5万</p></td>
     <td><p>375万</p></td>
     <td><p>1500万</p></td>
   </tr>
</table>

<Admonition type="info" icon="📘" title="Notes">

<p>上記の指標は、主キーとベクトルのみを考慮したテストに基づいています。データセットに追加のスカラー（数値）フィールド（例：id、ラベル、キーワードなど）がある場合、実際の容量は変動する可能性があります。正確な評価のために個人テストを実施することが賢明です。</p>

</Admonition>

### パフォーマンスの評価\{#evaluate-performance}

パフォーマンス指標、特に遅延と1秒あたりのクエリ数 (QPS) は重要です。パフォーマンス最適化クラスターは、特に10から250までの標準的な `top-k` 値に対して、容量最適化クラスターよりも顕著に遅延とスループットで優れています。

以下の表は、各クラスタータイプが QPS でどのようにパフォーマンスを発揮するかのテスト結果を示しています。

<table>
   <tr>
     <th><p>top_k</p></th>
     <th><p>パフォーマンス最適化クラスターの QPS (768次元 100万ベクトル)</p></th>
     <th><p>容量最適化クラスターの QPS (768次元 500万ベクトル)</p></th>
   </tr>
   <tr>
     <td><p>10</p></td>
     <td><p>520</p></td>
     <td><p>100</p></td>
   </tr>
   <tr>
     <td><p>100</p></td>
     <td><p>440</p></td>
     <td><p>80</p></td>
   </tr>
   <tr>
     <td><p>250</p></td>
     <td><p>270</p></td>
     <td><p>60</p></td>
   </tr>
   <tr>
     <td><p>1000</p></td>
     <td><p>150</p></td>
     <td><p>40</p></td>
   </tr>
</table>

以下の表は、各クラスタータイプが遅延でどのようにパフォーマンスを発揮するかのテスト結果を示しています。

<table>
   <tr>
     <th><p>top_k</p></th>
     <th><p>パフォーマンス最適化クラスターの遅延 (768次元 100万ベクトル)</p></th>
     <th><p>容量最適化クラスターの遅延 (768次元 500万ベクトル)</p></th>
   </tr>
   <tr>
     <td><p>10</p></td>
     <td><p>&lt; 10 ミリ秒</p></td>
     <td><p>&lt; 50 ミリ秒</p></td>
   </tr>
   <tr>
     <td><p>100</p></td>
     <td><p>&lt; 10 ミリ秒</p></td>
     <td><p>&lt; 50 ミリ秒</p></td>
   </tr>
   <tr>
     <td><p>250</p></td>
     <td><p>&lt; 10 ミリ秒</p></td>
     <td><p>&lt; 50 ミリ秒</p></td>
   </tr>
   <tr>
     <td><p>1000</p></td>
     <td><p>10 - 20 ミリ秒</p></td>
     <td><p>50 - 100 ミリ秒</p></td>
   </tr>
</table>

## シナリオ分析\{#scenario-breakdown}

800万枚の画像ライブラリを持つ画像レコメンデーションアプリケーションを構築していると仮定します。ライブラリ内の各画像は768次元の埋め込みベクトルで表されます。目標は、1秒あたり1,000件のレコメンデーションリクエストを迅速に処理し、30ミリ秒以内にトップ100の画像レコメンデーションを提供することです。

この要件に適したクラスタータイプとクエリCUを選択するには、以下の手順に従います：

1. **遅延の評価**：パフォーマンス最適化クラスターのみが30ミリ秒の遅延要件を満たすタイプです。

1. **容量の評価**：1クエリCUを持つ単一のパフォーマンス最適化クラスターは、150万の768次元ベクトルを収容できます。800万ベクトルすべてを格納するには、少なくとも6クエリCUが必要です。

1. **スループットの確認**：`top-k` 設定が100の場合、パフォーマンス最適化クラスターは440のQPSを達成できます。1,000QPSを維持するには、レプリカ数を3倍にする必要があります。

結論として、このシナリオではパフォーマンス最適化クラスターが最適です。各レプリカが6クエリCUで構成され、3レプリカの構成が完璧に適しています。
