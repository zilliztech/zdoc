---
title: "マルチテナントを実装する | BYOC"
slug: /multi-tenancy
sidebar_label: "マルチテナントを実装する"
beta: FALSE
notebook: FALSE
description: "Zilliz Cloudでは、マルチテナントとは、複数の顧客またはチーム（テナントと呼ばれる）が同じクラスターを共有しながら、分離されたデータ環境を維持することを意味します。 | BYOC"
type: origin
token: P4x2wqUIAigxtIk3QN8cf3Srnwh
sidebar_position: 2
keywords: 
  - zilliz
  - vector database
  - cloud
  - milvus
  - multi-tenancy
  - open source vector db
  - vector database example
  - rag vector database
  - what is vector db

---

import Admonition from '@theme/Admonition';


# マルチテナントを実装する

Zilliz Cloudでは、マルチテナントとは、複数の顧客またはチーム（テナントと呼ばれる）が同じクラスターを共有しながら、分離されたデータ環境を維持することを意味します。 

Zilliz Cloudは4つのマルチテナント戦略をサポートしており、それぞれがスケーラビリティ、データの分離、柔軟性のトレードオフを提供しています。このガイドでは、各オプションについて説明し、ユースケースに最適な戦略を選択するのに役立ちます。

## Zilliz Cloudのマルチテナント戦略{#multi-tenancy-strategies-in-zilliz-cloud}

Zilliz Cloudは、**データベース**、**コレクション**、**パーティション**、**パーティションキー**の4つのレベルでマルチテナントをサポートしています。 

### データベースレベルのマルチテナント{#database-level-multi-tenancy}

[データベース](./database)レベルのマルチテナントでは、各テナントは1つ以上のコレクションを含む対応するデータベースを受け取ります。 

![DdZQwJHNchlqTpbpVTmc2luXnRf](/img/DdZQwJHNchlqTpbpVTmc2luXnRf.png)

- **スケーラビリティ**:データベースレベルのマルチテナント戦略は、Zilliz Cloudの専用クラスタープランでのみ利用可能で、最大1,024テナントをサポートしています。

- **データ分離**:各データベースのデータは完全に分離されており、規制環境や厳格なコンプライアンスニーズを持つ顧客に最適なエンタープライズグレードのデータ分離を提供します。

- **柔軟性**:各データベースは異なるスキーマを持つコレクションを持つことができ、非常に柔軟なデータ組織を提供し、各テナントが独自のデータスキーマを持つことができます。

- **その他**:この戦略はRBACもサポートしており、テナントごとのユーザーアクセスをきめ細かく制御できます。さらに、特定のテナントのデータを柔軟にロードまたはリリースして、ホットデータとコールドデータを効果的に管理できます。

### コレクションレベルのマルチテナント{#collection-level-multi-tenancy}

[コレクションレ](./collection)ベルのマルチテナンシーでは、各テナントにコレクションが割り当てられ、強力なデータ分離が提供されます。 

![OQZ9w5icHhKDHqbqbK0c2PuHnth](/img/OQZ9w5icHhKDHqbqbK0c2PuHnth.png)

- **スケーラビリティ**:クラスターは最大16,384のコレクションを保持できるため、この戦略はクラスター内の同じ数のテナントに対応できます。

- **データの分離**:コレクションは互いに物理的に分離されています。この戦略は強力なデータの分離を提供します。

- **柔軟性**:この戦略により、各コレクションに独自のスキーマを持たせ、異なるデータスキーマを持つテナントに対応できます。

- **その他**:この戦略はRBACもサポートしており、テナントに対するきめ細かいアクセス制御を可能にします。さらに、特定のテナントのデータを柔軟にロードまたはリリースして、ホットデータとコールドデータを効果的に管理できます。

### パーティションレベルのマルチテナント{#partition-level-multi-tenancy}

[パーティション](./manage-partitions)レベルのマルチテナントでは、各テナントは共有コレクション内で手動で作成されたパーティションに割り当てられます。 

![GHRfwKurhhd3NEbaf3NcEliPnFb](/img/GHRfwKurhhd3NEbaf3NcEliPnFb.png)

- **スケーラビリティ**:コレクションは最大1,024のパーティションを保持でき、同じ数のテナントを収容できます。

- **データの分離**:各テナントのデータはパーティションによって物理的に分離されています。

- **柔軟性**:この戦略では、すべてのテナントが同じデータスキーマを共有する必要があります。また、パーティションは手動で作成する必要があります。

- **その他**: RBACはパーティションレベルではサポートされていません。テナントは個別にまたは複数のパーティション間でクエリを実行できるため、このアプローチはテナントセグメント全体にわたる集計クエリや分析を含むシナリオに適しています。さらに、特定のテナントのデータを柔軟にロードまたはリリースして、ホットデータとコールドデータを効果的に管理できます。

### パーティションキーレベルのマルチテナント{#partition-key-level-multi-tenancy}

この戦略では、すべてのテナントが単一のコレクションとスキーマを共有しますが、各テナントのデータは[パーティションキーの値](./use-partition-key)に基づいて自動的に16の物理的に分離されたパーティションにルーティングされます。各物理パーティションには複数のテナントを含めることができますが、異なるテナントからのデータは論理的に分離されたままです。 

![SGXYw0a5ph2mrDbaaiccbriEn5d](/img/SGXYw0a5ph2mrDbaaiccbriEn5d.png)

- **スケーラビリティ**:パーティションキーレベル戦略は、何百万ものテナントをサポートする最もスケーラブルなアプローチを提供します。

- **データ分離**:この戦略では、物理パーティションに複数のテナントが共有できるため、比較的弱いデータ分離が提供されます。

- **柔軟性**:すべてのテナントが同じデータスキーマを共有する必要があるため、この戦略ではデータの柔軟性が制限されます。

- **その他**: RBACはパーティションキーレベルではサポートされていません。テナントは個別にまたは複数のパーティション間でクエリを実行できるため、このアプローチはテナントセグメント全体で集計クエリや分析を行うシナリオに適しています。

## 適切なマルチテナント戦略の選択{#choosing-the-right-multi-tenancy-strategy}

以下の表は、マルチテナント戦略の4つのレベルの包括的な比較を提供しています。

<table>
   <tr>
     <th></th>
     <th><p><strong>データベースレベル</strong></p></th>
     <th><p><strong>コレクションレベル</strong></p></th>
     <th><p><strong>パーティションレベル</strong></p></th>
     <th><p><strong>パーティションのキーレベル</strong></p></th>
   </tr>
   <tr>
     <td><p><strong>プランの可用性</strong></p></td>
     <td><p>専用プランのみ</p></td>
     <td><p>すべてのプラン</p></td>
     <td><p>すべてのプラン</p></td>
     <td><p>すべてのプラン</p></td>
   </tr>
   <tr>
     <td><p><strong>データの分離</strong></p></td>
     <td><p>物理的な</p></td>
     <td><p>物理的な</p></td>
     <td><p>物理的な</p></td>
     <td><p>物理的な+論理的な</p></td>
   </tr>
   <tr>
     <td><p><strong>最大テナント数</strong></p></td>
     <td><p>1024</p></td>
     <td><p>クラスタープランによって最大16,384まで。 </p><p><a href="./limits">Zillizクラウドの制限</a>を見る</p></td>
     <td><p>クラスタープランに応じて、コレクションごとに最大1,024まで。 </p><p><a href="./limits">Zillizクラウドの制限</a>を見る</p></td>
     <td><p>何百万も</p></td>
   </tr>
   <tr>
     <td><p><strong>データスキーマの柔軟性</strong></p></td>
     <td><p>高い</p></td>
     <td><p>ミディアム</p></td>
     <td><p>低い</p></td>
     <td><p>低い</p></td>
   </tr>
   <tr>
     <td><p><strong>RBACサポート</strong></p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
     <td><p>いいえ</p></td>
     <td><p>いいえ</p></td>
   </tr>
   <tr>
     <td><p><strong>検索パフォーマンス</strong></p></td>
     <td><p>強い</p></td>
     <td><p>強い</p></td>
     <td><p>ミディアム</p></td>
     <td><p>ミディアム</p></td>
   </tr>
   <tr>
     <td><p><strong>クロステナント検索サポート</strong></p></td>
     <td><p>いいえ</p></td>
     <td><p>いいえ</p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
   </tr>
   <tr>
     <td><p><strong>ホットデータとコールドデータを効果的に処理するためのサポート</strong></p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
     <td><p>いいえ</p><p>現在、パーティションキーレベル戦略はサポートされていません。ただし、大規模なテナントがあり、ホットデータとコールドデータを効果的に処理する必要がある場合は、<a href="https://zilliz.com/contact-sales">お問い合わせ</a>ください。</p></td>
   </tr>
</table>

Zilliz Cloudでマルチテナント戦略を選択する際に考慮すべき要素がいくつかあります。

1. **スケーラビリティ**:パーティションキー>パーティション>コレクション>データベース

    非常に多数のテナント(数百万以上)をサポートする必要がある場合は、パーティションキーレベル戦略を使用します。

1. **強力なデータ分離要件**:データベース=コレクション>パーティション>パーティションキー

    厳密な物理データ分離要件がある場合は、データベース、コレクション、またはパーティションレベルの戦略を選択します。 

1. **各テナントのデータに対する柔軟なデータスキーマ**:データベース>コレクション>パーティション=パーティションキー

    データベースレベルとコレクションレベルの戦略は、データスキーマに完全な柔軟性を提供します。テナントのデータ構造が異なる場合は、データベースレベルまたはコレクションレベルのマルチテナントを選択してください。

1. **その他**

    1. **パフォーマンス**:検索のパフォーマンスは、インデックス、検索パラメータ、マシンの設定など、さまざまな要因によって決定されます。Zilliz Cloudはパフォーマンスチューニングもサポートしています。マルチテナント戦略を選択する前に、実際のパフォーマンスをテストすることをお勧めします。

    1. **ホットデータとコールドデータの効果的な処理**:現在、データベースレベル、コレクションレベル、パーティションレベルの戦略はすべて、ホットデータとコールドデータの処理をサポートしています。パーティションキーレベルの戦略を選択したいが、ホットデータとコールドデータの処理が必要な場合は、お問い合わせください。

    1. **テナント間検索**:パーティションレベルとパーティションキーレベルの戦略のみが、テナント間クエリをサポートしています。

