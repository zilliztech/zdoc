---
title: "マルチテナンシーの実装 | BYOC"
slug: /multi-tenancy
sidebar_label: "マルチテナンシーの実装"
beta: FALSE
added_since: FALSE
last_modified: FALSE
deprecate_since: FALSE
notebook: FALSE
description: "Zilliz Cloud では、マルチテナンシーとは、複数の顧客またはチーム（テナントと呼ばれる）が同じクラスターを共有しながらも、隔離されたデータ環境を維持することを意味します。 | BYOC"
type: origin
token: R8amwM1K6iBDLuk0KcEcHJxtnhb
sidebar_position: 2
keywords:
  - zilliz
  - vector database
  - cloud
  - milvus
  - multi-tenancy
  - milvus vector database
  - milvus db
  - milvus vector db
  - Zilliz Cloud

---

import Admonition from '@theme/Admonition';


# マルチテナンシーの実装

Zilliz Cloud では、マルチテナンシーとは、複数の顧客またはチーム（テナントと呼ばれる）が同じクラスターを共有しながらも、隔離されたデータ環境を維持することを意味します。

Zilliz Cloud は4つのマルチテナンシーストラテジーをサポートしており、それぞれがスケーラビリティ、データ分離、柔軟性の間で異なるトレードオフを提供します。このガイドでは、それぞれのオプションを説明し、ユースケースに最も適したストラテジーを選択するのに役立ちます。

## マルチテナンシーストラテジー\{#multi-tenancy-strategies}

Zilliz Cloud では、4つのレベルでマルチテナンシーをサポートしています：**データベース**、**コレクション**、**パーティション**、および**パーティションキー**。

### データベースレベルのマルチテナンシー\{#database-level-multi-tenancy}

データベースレベルのマルチテナンシーでは、各テナントに1つ以上のコレクションを含む対応する[データベース](./database)が割り当てられます。

![NVV9w0w49hZJ61bNzG4cdi9gn6C](/img/NVV9w0w49hZJ61bNzG4cdi9gn6C.png)

- **スケーラビリティ**：データベースレベルのマルチテナンシーストラテジーは Zilliz Cloud の専用クラスターでのみ利用可能で、最大1,024のテナントをサポートします。

- **データ分離**：各データベースのデータは完全に分離されており、規制環境や厳しいコンプライアンス要件を持つ顧客に理想的なエンタープライズグレードのデータ分離を提供します。

- **柔軟性**：各データベースは異なるスキーマを持つコレクションを持つことができ、非常に柔軟なデータ編成を可能にし、各テナントが独自のデータスキーマを持つことを可能にします。

- **その他**：このストラテジーは RBAC をサポートしており、テナントごとのきめ細かいユーザーアクセス制御を可能にします。さらに、ホットデータとコールドデータを効果的に管理するために、特定のテナントのデータを柔軟にロードまたは解放できます。

### コレクションレベルのマルチテナンシー\{#collection-level-multi-tenancy}

コレクションレベルのマルチテナンシーでは、各テナントに[コレクション](./manage-collections)が割り当てられ、強力なデータ分離を提供します。

![SNxNwi64ChMFdubYKmrcGOH5ncg](/img/SNxNwi64ChMFdubYKmrcGOH5ncg.png)

- **スケーラビリティ**：クラスターは最大16,384のコレクションを保持できるため、このストラテジーはクラスター内で同じ数のテナントを収容できます。

- **データ分離**：コレクションは物理的に相互に分離されています。このストラテジーは強力なデータ分離を提供します。

- **柔軟性**：このストラテジーでは、各コレクションが独自のスキーマを持つことができ、異なるデータスキーマを持つテナントに対応できます。

- **その他**：このストラテジーは RBAC をサポートしており、テナントに対するきめ細かいアクセス制御を可能にします。さらに、ホットデータとコールドデータを効果的に管理するために、特定のテナントのデータを柔軟にロードまたは解放できます。

### パーティションレベルのマルチテナンシー\{#partition-level-multi-tenancy}

パーティションレベルのマルチテナンシーでは、各テナントは共有コレクション内に手動で作成された[パーティション](./manage-partitions)に割り当てられます。

![D5cawfOk0hKkJmbJwHwc54a5n4f](/img/D5cawfOk0hKkJmbJwHwc54a5n4f.png)

- **スケーラビリティ**：コレクションはコレクションごとに最大1,024のパーティションを保持できるため、同じ数のテナントを収容できます。

- **データ分離**：各テナントのデータはパーティションによって物理的に分離されます。

- **柔軟性**：このストラテジーでは、すべてのテナントが同じデータスキーマを共有する必要があります。また、パーティションは手動で作成する必要があります。

- **その他**：RBAC はパーティションレベルでサポートされていません。テナントは個別に、または複数のパーティションにわたって照会できることから、このアプローチはテナントセグメント間での集約クエリや分析に適しています。さらに、ホットデータとコールドデータを効果的に管理するために、特定のテナントのデータを柔flexiblyにロードまたは解放できます。

### パーティションキー レベルのマルチテナンシー\{#partition-key-level-multi-tenancy}

このストラテジーでは、すべてのテナントが単一のコレクションとスキーマを共有しますが、各テナントのデータは [パーティションキー](./use-partition-key) 値に基づいて16の物理的に分離されたパーティションに自動的にルーティングされます。各物理的パーティションが複数のテナントを含む可能性がありますが、異なるテナントのデータは論理的に分離されたままです。

![GzOrwUHnEhaPGybcp7ActPwsnMh](/img/GzOrwUHnEhaPGybcp7ActPwsnMh.png)

- **スケーラビリティ**：パーティションキーレベルのストラテジーは最もスケーラブルなアプローチを提供し、数百万のテナントをサポートします。

- **データ分離**：このストラテジーは複数のテナントが物理的パーティションを共有できるため、比較的弱いデータ分離を提供します。

- **柔軟性**：すべてのテナントが同じデータスキーマを共有しなければならないため、このストラテジーは限られたデータの柔軟性を提供します。

- **その他**：RBAC はパーティションキーレベルでサポートされていません。テナントは個別に、または複数のパーティションにわたって照会できることから、このアプローチはテナントセグメント間での集約クエリや分析に適しています。

## 適切なマルチテナンシーストラテジーの選択\{#choosing-the-right-multi-tenancy-strategy}

以下の表は、4つのレベルのマルチテナンシーストラテジーを包括的に比較したものです。

<table>
   <tr>
     <th></th>
     <th><p><strong>データベースレベル</strong></p></th>
     <th><p><strong>コレクションレベル</strong></p></th>
     <th><p><strong>パーティションレベル</strong></p></th>
     <th><p><strong>パーティションキー レベル</strong></p></th>
   </tr>
   <tr>
     <td><p><strong>クラスター展開オプション</strong></p></td>
     <td><p>専用のみ</p></td>
     <td><p>すべての展開オプション</p></td>
     <td><p>すべての展開オプション</p></td>
     <td><p>すべての展開オプション</p></td>
   </tr>
   <tr>
     <td><p><strong>データ分離</strong></p></td>
     <td><p>物理的</p></td>
     <td><p>物理的</p></td>
     <td><p>物理的</p></td>
     <td><p>物理的 + 論理的</p></td>
   </tr>
   <tr>
     <td><p><strong>最大テナント数</strong></p></td>
     <td><p>1024</p></td>
     <td><p>クラスター展開オプションとプロジェクトプランに応じて最大16,384。 </p><p>詳細は <a href="./limits#collections">Zilliz Cloud 制限事項</a> を参照してください</p></td>
     <td><p>クラスター展開オプションとプロジェクトプランに応じてコレクションごとに最大1,024。 </p><p>詳細は <a href="./limits">Zilliz Cloud 制限事項</a> を参照してください</p></td>
     <td><p>数百万</p></td>
   </tr>
   <tr>
     <td><p><strong>データスキーマの柔軟性</strong></p></td>
     <td><p>高</p></td>
     <td><p>中</p></td>
     <td><p>低</p></td>
     <td><p>低</p></td>
   </tr>
   <tr>
     <td><p><strong>RBAC サポート</strong></p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
     <td><p>いいえ</p></td>
     <td><p>いいえ</p></td>
   </tr>
   <tr>
     <td><p><strong>検索パフォーマンス</strong></p></td>
     <td><p>強</p></td>
     <td><p>強</p></td>
     <td><p>中</p></td>
     <td><p>中</p></td>
   </tr>
   <tr>
     <td><p><strong>テナント間検索サポート</strong></p></td>
     <td><p>いいえ</p></td>
     <td><p>いいえ</p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
   </tr>
   <tr>
     <td><p><strong>ホットおよびコールドデータの効果的な処理サポート</strong></p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
     <td><p>はい</p></td>
     <td><p>いいえ</p><p>現在、パーティションキーレベルのストラテジーではサポートされていません。ただし、多数のテナントがいてホットおよびコールドデータの効果的な処理が必要な場合は、<a href="https://zilliz.com/contact-sales">お問い合わせください</a>。</p></td>
   </tr>
</table>

Zilliz Cloud でマルチテナンシーストラテジーを選択する際には、いくつかの考慮事項があります。

1. **スケーラビリティ：** パーティションキー > パーティション > コレクション > データベース

    非常に多数のテナント（数百万以上）をサポートすると予想される場合は、パーティションキーレベルのストラテジーを使用します。

1. **強力なデータ分離要件：** データベース = コレクション > パーティション > パーティションキー

    厳格な物理的データ分離要件がある場合は、データベース、コレクション、またはパーティションレベルのストラテジーを選択します。

1. **各テナントのデータの柔軟なデータスキーマ：** データベース > コレクション > パーティション = パーティションキー

    データベースレベルとコレクションレベルのストラテジーは、データスキーマの完全な柔軟性を提供します。テナントのデータ構造が異なる場合は、データベースレベルまたはコレクションレベルのマルチテナンシーを選択してください。

1. **その他**

    1. **パフォーマンス：** 検索パフォーマンスは、インデックス、検索パラメータ、マシン構成などさまざまな要因によって決定されます。Zilliz Cloud はパフォーマンス調整もサポートしています。マルチテナンシーストラテジーを選択する前に、実際のパフォーマンスをテストすることをお勧めします。

    1. **ホットおよびコールドデータの効果的な処理：** 現在、データベースレベル、コレクションレベル、およびパーティションレベルのストラテジーはすべて、ホットおよびコールドデータ処理をサポートしています。パーティションキーレベルのストラテジーを選択したいが、ホットおよびコールドデータ処理を必要とする場合は、[お問い合わせください](https://zilliz.com/contact-sales)。

    1. **テナント間検索：** パーティションレベルとパーティションキーレベルのストラテジーのみが、テナント間クエリをサポートしています。